exports.id=4357,exports.ids=[4357],exports.modules={674:(a,b,c)=>{"use strict";c.d(b,{BK:()=>h,eu:()=>g,q5:()=>i});var d=c(21124);c(38301);var e=c(71507),f=c(15514);function g({className:a,...b}){return(0,d.jsx)(e.bL,{"data-slot":"avatar",className:(0,f.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...b})}function h({className:a,...b}){return(0,d.jsx)(e._V,{"data-slot":"avatar-image",className:(0,f.cn)("aspect-square size-full",a),...b})}function i({className:a,...b}){return(0,d.jsx)(e.H4,{"data-slot":"avatar-fallback",className:(0,f.cn)("bg-muted flex size-full items-center justify-center rounded-full",a),...b})}},7629:(a,b,c)=>{"use strict";c.d(b,{p:()=>f});var d=c(21124);c(38301);var e=c(15514);function f({className:a,type:b,...c}){return(0,d.jsx)("input",{type:b,"data-slot":"input",className:(0,e.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...c})}},8044:(a,b,c)=>{"use strict";c.d(b,{w:()=>g});var d=c(21124);c(38301);var e=c(50012),f=c(15514);function g({className:a,orientation:b="horizontal",decorative:c=!0,...g}){return(0,d.jsx)(e.b,{"data-slot":"separator",decorative:c,orientation:b,className:(0,f.cn)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",a),...g})}},9188:(a,b,c)=>{"use strict";c.d(b,{SQ:()=>i,_2:()=>j,lp:()=>k,mB:()=>l,rI:()=>g,ty:()=>h});var d=c(21124);c(38301);var e=c(12927),f=c(15514);function g({...a}){return(0,d.jsx)(e.bL,{"data-slot":"dropdown-menu",...a})}function h({...a}){return(0,d.jsx)(e.l9,{"data-slot":"dropdown-menu-trigger",...a})}function i({className:a,sideOffset:b=4,...c}){return(0,d.jsx)(e.ZL,{children:(0,d.jsx)(e.UC,{"data-slot":"dropdown-menu-content",sideOffset:b,className:(0,f.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",a),...c})})}function j({className:a,inset:b,variant:c="default",...g}){return(0,d.jsx)(e.q7,{"data-slot":"dropdown-menu-item","data-inset":b,"data-variant":c,className:(0,f.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...g})}function k({className:a,inset:b,...c}){return(0,d.jsx)(e.JU,{"data-slot":"dropdown-menu-label","data-inset":b,className:(0,f.cn)("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",a),...c})}function l({className:a,...b}){return(0,d.jsx)(e.wv,{"data-slot":"dropdown-menu-separator",className:(0,f.cn)("bg-border -mx-1 my-1 h-px",a),...b})}},15514:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>k,metadata:()=>j});var d=c(75338),e=c(42003),f=c.n(e);c(82704);var g=c(44327),h=c(20656),i=c(25927);let j={title:"Commitly - Track Your Goals",description:"Set, track, and complete your goals with accountability partners"};function k({children:a}){return(0,d.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,d.jsx)("body",{className:f().className,children:(0,d.jsxs)(g.ThemeProvider,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,children:[a,(0,d.jsx)(h.Toaster,{}),(0,d.jsx)(i.Analytics,{})]})})})}},19217:(a,b,c)=>{"use strict";c.d(b,{$:()=>i,r:()=>h});var d=c(21124);c(38301);var e=c(96425),f=c(26691),g=c(15514);let h=(0,f.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i({className:a,variant:b,size:c,asChild:f=!1,...i}){let j=f?e.DX:"button";return(0,d.jsx)(j,{"data-slot":"button",className:(0,g.cn)(h({variant:b,size:c,className:a})),...i})}},20656:(a,b,c)=>{"use strict";c.d(b,{Toaster:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call Toaster() from the server but Toaster is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\mgift\\OneDrive\\Desktop\\Commitly\\Commitly\\frontend\\components\\ui\\sonner.tsx","Toaster")},22544:(a,b,c)=>{"use strict";c.d(b,{E:()=>i});var d=c(21124);c(38301);var e=c(96425),f=c(26691),g=c(15514);let h=(0,f.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function i({className:a,variant:b,asChild:c=!1,...f}){let i=c?e.DX:"span";return(0,d.jsx)(i,{"data-slot":"badge",className:(0,g.cn)(h({variant:b}),a),...f})}},26111:(a,b,c)=>{"use strict";c.d(b,{O:()=>Z});var d=c(21124),e=c(38301),f=c(19217),g=c(674),h=c(9188),i=c(39641),j=c(47089),k=c(15514);function l({...a}){return(0,d.jsx)(i.bL,{"data-slot":"sheet",...a})}function m({...a}){return(0,d.jsx)(i.l9,{"data-slot":"sheet-trigger",...a})}function n({...a}){return(0,d.jsx)(i.ZL,{"data-slot":"sheet-portal",...a})}function o({className:a,...b}){return(0,d.jsx)(i.hJ,{"data-slot":"sheet-overlay",className:(0,k.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...b})}function p({className:a,children:b,side:c="right",...e}){return(0,d.jsxs)(n,{children:[(0,d.jsx)(o,{}),(0,d.jsxs)(i.UC,{"data-slot":"sheet-content",className:(0,k.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===c&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===c&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===c&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===c&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",a),...e,children:[b,(0,d.jsxs)(i.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,d.jsx)(j.A,{className:"size-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}var q=c(60988),r=c(70175),s=c(34487),t=c(6130),u=c(81808),v=c(65893),w=c(10578),x=c(94684),y=c(19710),z=c(88285),A=c(47268),B=c(45523),C=c(3991),D=c.n(C),E=c(42378),F=c(7629),G=c(22544),H=c(69596),I=c(15303),J=c(52681);function K({className:a,placeholder:b="Search goals, users, achievements..."}){let[c,h]=(0,e.useState)(""),[i,l]=(0,e.useState)([]),[m,n]=(0,e.useState)(!1),[o,p]=(0,e.useState)([]),q=(0,E.useRouter)(),r=(0,e.useRef)(null),s=(0,e.useCallback)(a=>{let b=[a,...o.filter(b=>b!==a)].slice(0,5);p(b),localStorage.setItem("recentSearches",JSON.stringify(b))},[o]);return(0,e.useCallback)(async a=>{if(a.length<2)return void l([]);let b=[],c=a.toLowerCase();try{let{data:d,error:e}=await J.N.from("profiles").select("id, username, first_name, last_name, profile_picture_url").or(`username.ilike.%${c}%,first_name.ilike.%${c}%,last_name.ilike.%${c}%`).limit(5);!e&&d?d.forEach(c=>{let d=`${c.first_name||""} ${c.last_name||""}`.trim()||c.username||"User",e=c.username||"no-username";b.push({id:c.id,type:"user",title:d,description:`@${e}`,avatar:c.profile_picture_url||void 0,onClick:()=>{q.push(`/profile/${e}`),s(a),n(!1)}})}):e&&console.error("User search error:",e);let{data:f,error:g}=await J.N.from("goals").select("id, title, description, category, status, progress").ilike("title",`%${c}%`).eq("visibility","public").limit(5);!g&&f&&f.forEach(c=>{b.push({id:c.id,type:"goal",title:c.title,description:c.description||"Public goal",category:c.category,status:c.status,progress:c.progress,onClick:()=>{q.push(`/goals/${c.id}`),s(a),n(!1)}})})}catch(a){console.warn("Search error:",a)}b.sort((a,b)=>"user"===a.type&&"user"!==b.type?-1:+("user"!==a.type&&"user"===b.type)),l(b.slice(0,8))},[q,s]),(0,d.jsxs)("div",{className:(0,k.cn)("relative",a),children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(z.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,d.jsx)(F.p,{ref:r,value:c,onChange:a=>h(a.target.value),onFocus:()=>n(!0),placeholder:b,className:"pl-10 pr-10"}),c&&(0,d.jsx)(f.$,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-6 w-6 p-0",onClick:()=>{h(""),l([])},children:(0,d.jsx)(j.A,{className:"h-3 w-3"})})]}),m&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),(0,d.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-background border rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto",children:[0===c.length&&o.length>0&&(0,d.jsxs)("div",{className:"p-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-muted-foreground",children:"Recent Searches"}),(0,d.jsx)(f.$,{variant:"ghost",size:"sm",onClick:()=>{p([]),localStorage.removeItem("recentSearches")},className:"h-6 text-xs",children:"Clear"})]}),(0,d.jsx)("div",{className:"space-y-1",children:o.map((a,b)=>(0,d.jsxs)("button",{className:"flex items-center gap-2 w-full p-2 text-left hover:bg-accent rounded text-sm",onClick:()=>{h(a),r.current?.focus()},children:[(0,d.jsx)(I.A,{className:"h-3 w-3 text-muted-foreground"}),a]},b))})]}),c.length>0&&0===i.length&&(0,d.jsxs)("div",{className:"p-4 text-center text-muted-foreground",role:"status","aria-live":"polite",children:[(0,d.jsx)(z.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50","aria-hidden":"true"}),(0,d.jsxs)("p",{className:"text-sm mb-2",children:["No results found for “",c,"”"]}),(0,d.jsx)("p",{className:"text-xs text-muted-foreground/80",children:"Try adjusting your search terms or browse categories"})]}),i.length>0&&(0,d.jsxs)("div",{className:"p-2",children:[(0,d.jsxs)("div",{className:"text-xs font-medium text-muted-foreground mb-2 px-2",children:[i.length," result",1!==i.length?"s":""]}),(0,d.jsx)("div",{className:"space-y-1",children:i.map(a=>{let b=(a=>{switch(a){case"goal":return u.A;case"user":return v.A;case"achievement":return H.A;case"notification":return A.A;default:return z.A}})(a.type);return(0,d.jsxs)("button",{className:"flex items-center gap-3 w-full p-2 text-left hover:bg-accent rounded transition-colors",onClick:a.onClick,children:["user"===a.type?(0,d.jsxs)(g.eu,{className:"h-8 w-8",children:[(0,d.jsx)(g.BK,{src:a.avatar}),(0,d.jsx)(g.q5,{className:"text-xs",children:a.title.split(" ").map(a=>a[0]).join("")})]}):(0,d.jsx)("div",{className:"p-2 rounded-full bg-muted",children:(0,d.jsx)(b,{className:`h-4 w-4 ${(a=>{switch(a){case"goal":return"text-blue-600";case"user":return"text-purple-600";case"achievement":return"text-yellow-600";case"notification":return"text-green-600";default:return"text-gray-600"}})(a.type)}`})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("span",{className:"font-medium text-sm truncate",children:a.title}),a.status&&(0,d.jsx)(G.E,{variant:"outline",className:"text-xs",children:a.status}),void 0!==a.progress&&(0,d.jsxs)(G.E,{variant:"secondary",className:"text-xs",children:[a.progress,"%"]})]}),a.description&&(0,d.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a.description})]}),(0,d.jsx)(G.E,{variant:"outline",className:"text-xs capitalize",children:a.type})]},a.id)})})]})]})]})]})}function L({onMenuClick:a}){let{theme:b,setTheme:c}=(0,B.D)(),[i,j]=(0,e.useState)(!1),[k,n]=(0,e.useState)(!1),[o,C]=(0,e.useState)(!1),[F,G]=(0,e.useState)(0),[H,I]=(0,e.useState)(null);(0,E.useRouter)();let L=async()=>{try{await J._.signOut(),localStorage.clear(),sessionStorage.clear(),window.location.replace("/auth/login")}catch(a){console.error("Logout error:",a),localStorage.clear(),sessionStorage.clear(),window.location.replace("/auth/login")}},M=()=>i?(0,d.jsxs)(h.rI,{children:[(0,d.jsx)(h.ty,{asChild:!0,children:(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"hover-lift",children:"dark"===b?(0,d.jsx)(q.A,{className:"h-5 w-5"}):"light"===b?(0,d.jsx)(r.A,{className:"h-5 w-5"}):(0,d.jsx)(s.A,{className:"h-5 w-5"})})}),(0,d.jsxs)(h.SQ,{align:"end",children:[(0,d.jsxs)(h._2,{onClick:()=>c("light"),children:[(0,d.jsx)(r.A,{className:"mr-2 h-4 w-4"}),"Light"]}),(0,d.jsxs)(h._2,{onClick:()=>c("dark"),children:[(0,d.jsx)(q.A,{className:"mr-2 h-4 w-4"}),"Dark"]}),(0,d.jsxs)(h._2,{onClick:()=>c("system"),children:[(0,d.jsx)(s.A,{className:"mr-2 h-4 w-4"}),"System"]})]})]}):null;return(0,d.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,d.jsxs)("div",{className:"container flex h-14 md:h-16 items-center justify-between px-3 sm:px-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4",children:[(0,d.jsxs)(l,{children:[(0,d.jsx)(m,{asChild:!0,children:(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"md:hidden",children:(0,d.jsx)(t.A,{className:"h-5 w-5"})})}),(0,d.jsx)(p,{side:"left",className:"w-64 p-0",children:(0,d.jsxs)("div",{className:"flex h-full flex-col",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 px-3 py-3 border-b",children:[(0,d.jsx)(u.A,{className:"h-5 w-5 text-primary"}),(0,d.jsx)("span",{className:"text-base font-bold",children:"Commitly"})]}),(0,d.jsxs)("nav",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[(0,d.jsx)(f.$,{variant:"ghost",className:"w-full justify-start h-9 text-sm",asChild:!0,children:(0,d.jsxs)(D(),{href:"/dashboard",children:[(0,d.jsx)(u.A,{className:"h-4 w-4 mr-2"})," Dashboard"]})}),(0,d.jsx)(f.$,{variant:"ghost",className:"w-full justify-start h-9 text-sm",asChild:!0,children:(0,d.jsxs)(D(),{href:"/goals",children:[(0,d.jsx)(u.A,{className:"h-4 w-4 mr-2"})," Goals"]})}),(0,d.jsx)(f.$,{variant:"ghost",className:"w-full justify-start h-9 text-sm",asChild:!0,children:(0,d.jsxs)(D(),{href:"/partners",children:[(0,d.jsx)(v.A,{className:"h-4 w-4 mr-2"})," Partners"]})}),(0,d.jsx)(f.$,{variant:"ghost",className:"w-full justify-start h-9 text-sm",asChild:!0,children:(0,d.jsxs)(D(),{href:"/profile",children:[(0,d.jsx)(w.A,{className:"h-4 w-4 mr-2"})," Profile"]})}),(0,d.jsx)(f.$,{variant:"ghost",className:"w-full justify-start h-9 text-sm",asChild:!0,children:(0,d.jsxs)(D(),{href:"/settings",children:[(0,d.jsx)(x.A,{className:"h-4 w-4 mr-2"})," Settings"]})})]}),(0,d.jsxs)("div",{className:"border-t p-2",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:(0,d.jsx)("span",{children:"Theme"})}),(0,d.jsx)("div",{children:(0,d.jsx)(M,{})})]}),(0,d.jsxs)(f.$,{variant:"outline",className:"w-full mt-2",onClick:L,children:[(0,d.jsx)(y.A,{className:"h-4 w-4 mr-2"})," Logout"]})]})]})})]}),(0,d.jsxs)(D(),{href:"/dashboard",className:"flex items-center gap-2 hover-lift",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary to-primary/60 rounded-lg blur opacity-75"}),(0,d.jsx)("div",{className:"relative bg-background rounded-lg p-1 border",children:(0,d.jsx)(u.A,{className:"h-5 w-5 text-primary"})})]}),(0,d.jsx)("span",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-primary to-primary/80 bg-clip-text text-transparent",children:"Commitly"})]})]}),(0,d.jsx)("div",{className:"hidden md:flex flex-1 max-w-md mx-4 sm:mx-8",children:(0,d.jsx)(K,{className:"w-full"})}),(0,d.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[(0,d.jsxs)(l,{open:k,onOpenChange:n,children:[(0,d.jsx)(m,{asChild:!0,children:(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"md:hidden",children:(0,d.jsx)(z.A,{className:"h-5 w-5"})})}),(0,d.jsx)(p,{side:"top",className:"p-4",children:(0,d.jsx)(K,{className:"w-full"})})]}),(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"hover-lift relative",onClick:()=>{try{let a=JSON.parse(localStorage.getItem("notifications")||"[]").filter(a=>!a.is_read).length;G(a)}catch{G(0)}},asChild:!0,children:(0,d.jsxs)(D(),{href:"/notifications",children:[(0,d.jsx)(A.A,{className:`h-5 w-5 transition-transform duration-200 ${o?"animate-bounce":""}`}),F>0&&(0,d.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center animate-pulse",children:F>9?"9+":F})]})}),(0,d.jsx)("div",{className:"hidden md:block",children:(0,d.jsx)(M,{})}),(0,d.jsxs)(h.rI,{children:[(0,d.jsx)(h.ty,{asChild:!0,children:(0,d.jsx)(f.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full hover-lift",children:(0,d.jsxs)(g.eu,{className:"h-10 w-10",children:[(0,d.jsx)(g.BK,{src:H?.profile_picture_url}),(0,d.jsx)(g.q5,{className:"bg-primary text-primary-foreground",children:H?`${H.first_name?.[0]||"J"}${H.last_name?.[0]||"D"}`:"JD"})]})})}),(0,d.jsxs)(h.SQ,{className:"w-56",align:"end",forceMount:!0,children:[(0,d.jsx)(h.lp,{className:"font-normal",children:(0,d.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium leading-none",children:H&&`${H.first_name||""} ${H.last_name||""}`.trim()||"User"}),(0,d.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:H?.email||"user@example.com"})]})}),(0,d.jsx)(h.mB,{}),(0,d.jsx)(h._2,{asChild:!0,children:(0,d.jsxs)(D(),{href:"/profile",className:"cursor-pointer",children:[(0,d.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Profile"]})}),(0,d.jsx)(h._2,{asChild:!0,children:(0,d.jsxs)(D(),{href:"/settings",className:"cursor-pointer",children:[(0,d.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Settings"]})}),(0,d.jsx)(h.mB,{}),(0,d.jsxs)(h._2,{onClick:L,className:"cursor-pointer",children:[(0,d.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})]})]})})}var M=c(88020),N=c(8044),O=c(78733),P=c(67748),Q=c(8849),R=c(59405),S=c(8294),T=c(93951);function U({className:a}){let[b,c]=(0,e.useState)(!1),[h,i]=(0,e.useState)("all"),[j,l]=(0,e.useState)([]),[m,n]=(0,e.useState)({goals:0,partners:0,completed:0,pending:0}),o=(0,E.usePathname)(),{theme:p,setTheme:t}=(0,B.D)(),w=[{name:"Dashboard",href:"/dashboard",icon:O.A,current:"/dashboard"===o},{name:"Goals",href:"/goals",icon:u.A,current:o.startsWith("/goals"),badge:m.goals.toString()},{name:"Search",href:"/search",icon:z.A,current:o.startsWith("/search")},{name:"Partners",href:"/partners",icon:v.A,current:o.startsWith("/partners"),badge:m.partners.toString()},{name:"Analytics",href:"/analytics",icon:P.A,current:o.startsWith("/analytics")}],x=[{name:"Create Goal",href:"/goals/create",icon:Q.A,color:"bg-primary text-primary-foreground"},{name:"Find Partners",href:"/partners/search",icon:v.A,color:"bg-accent text-accent-foreground"}],A=[{id:1,title:"Morning Workout",progress:75,type:"recurring",streak:12,category:"Health & Fitness"},{id:2,title:"Read 30 minutes",progress:45,type:"single",streak:5,category:"Learning"},{id:3,title:"Learn Spanish",progress:30,type:"multi",streak:8,category:"Learning"},{id:4,title:"Meditation Practice",progress:60,type:"recurring",streak:15,category:"Wellness"},{id:5,title:"Project Planning",progress:20,type:"single",streak:3,category:"Career"}];return("all"===h?A:A.filter(a=>{switch(h){case"health":return"Health & Fitness"===a.category;case"learning":return"Learning"===a.category;case"career":return"Career"===a.category;case"wellness":return"Wellness"===a.category;case"recurring":return"recurring"===a.type;case"single":return"single"===a.type;case"multi":return"multi"===a.type;default:return!0}})).slice(0,3),(0,d.jsxs)("div",{className:(0,k.cn)("flex h-full flex-col border-r bg-card transition-all duration-300 text-[13px] sm:text-[14px]",b?"w-14":"w-56 md:w-72",a),children:[(0,d.jsxs)("div",{className:"flex h-14 md:h-16 items-center justify-between px-3 sm:px-4 border-b",children:[!b&&(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(u.A,{className:"h-6 w-6 text-primary"}),(0,d.jsx)("span",{className:"text-lg font-bold",children:"Commitly"})]}),(0,d.jsx)(f.$,{variant:"ghost",size:"icon",onClick:()=>c(!b),className:"h-8 w-8",children:b?(0,d.jsx)(R.A,{className:"h-4 w-4"}):(0,d.jsx)(S.A,{className:"h-4 w-4"})})]}),b&&(0,d.jsx)("div",{className:"p-3 border-b md:hidden",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsxs)(g.eu,{className:"h-10 w-10",children:[(0,d.jsx)(g.BK,{src:"/placeholder-avatar.jpg"}),(0,d.jsx)(g.q5,{className:"bg-primary text-primary-foreground font-bold",children:(()=>{try{let a=localStorage.getItem("kycData");if(a){let b=JSON.parse(a);return`${b.firstName?.[0]||"J"}${b.lastName?.[0]||"D"}`}}catch{}return"JD"})()})]}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("p",{className:"font-medium text-sm truncate",children:(()=>{try{let a=localStorage.getItem("kycData");if(a){let b=JSON.parse(a);return`${b.firstName||"John"} ${b.lastName||"Doe"}`}}catch{}return"John Doe"})()}),(0,d.jsxs)("p",{className:"text-xs text-muted-foreground truncate",children:["@",(()=>{try{let a=localStorage.getItem("kycData");if(a)return JSON.parse(a).username||"johndoe"}catch{}return"johndoe"})()]})]})]})}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:[(0,d.jsx)("nav",{className:"p-3 sm:p-4 space-y-1.5",children:w.map(a=>{let c=a.icon;return(0,d.jsx)(D(),{href:a.href,children:(0,d.jsxs)("div",{className:(0,k.cn)("flex items-center gap-2.5 px-2.5 py-2 rounded-lg text-[13px] sm:text-sm font-medium transition-all duration-200 hover:bg-accent hover:text-accent-foreground",a.current&&"bg-primary text-primary-foreground shadow-sm",b&&"justify-center px-0"),children:[(0,d.jsx)(c,{className:"h-5 w-5 flex-shrink-0"}),!b&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"flex-1",children:a.name}),a.badge&&(0,d.jsx)(G.E,{variant:"secondary",className:"text-xs",children:a.badge})]})]})},a.name)})}),(0,d.jsx)(N.w,{className:"mx-4"}),!b&&(0,d.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,d.jsx)("h3",{className:"mb-3 text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Quick Actions"}),(0,d.jsx)("div",{className:"space-y-2",children:x.map(a=>{let b=a.icon;return(0,d.jsx)(D(),{href:a.href,children:(0,d.jsxs)(f.$,{variant:"outline",className:"w-full justify-start h-auto py-3 px-3 hover-lift",children:[(0,d.jsx)("div",{className:(0,k.cn)("p-1.5 rounded-md mr-3",a.color),children:(0,d.jsx)(b,{className:"h-4 w-4"})}),(0,d.jsx)("span",{className:"text-sm",children:a.name})]})},a.name)})})]}),(0,d.jsx)(N.w,{className:"mx-4"}),!b&&(0,d.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Close to Unlock"}),(0,d.jsx)(T.A,{className:"h-6 w-6 text-yellow-500 animate-pulse"})]}),(0,d.jsx)("div",{className:"space-y-3",children:j.map(a=>(a.icon,(0,d.jsx)(D(),{href:"/achievements",children:(0,d.jsxs)("div",{className:`p-1 rounded border backdrop-blur-sm hover:backdrop-blur-md transition-all hover-lift ${(()=>{switch(a.rarity){case"common":default:return"bg-gradient-to-br from-gray-100/80 to-gray-200/80 dark:from-gray-800/80 dark:to-gray-900/80 border-gray-300/50";case"rare":return"bg-gradient-to-br from-blue-100/80 to-blue-200/80 dark:from-blue-900/80 dark:to-blue-800/80 border-blue-300/50";case"epic":return"bg-gradient-to-br from-purple-100/80 to-purple-200/80 dark:from-purple-900/80 dark:to-purple-800/80 border-purple-300/50";case"legendary":return"bg-gradient-to-br from-yellow-100/80 to-orange-200/80 dark:from-yellow-900/80 dark:to-orange-800/80 border-yellow-300/50"}})()}`,children:[(0,d.jsxs)("div",{className:"flex items-start gap-1 mb-1",children:[(0,d.jsx)("div",{className:`p-1 rounded ${(()=>{switch(a.rarity){case"common":default:return"bg-gray-200/60 dark:bg-gray-700/60";case"rare":return"bg-blue-200/60 dark:bg-blue-700/60";case"epic":return"bg-purple-200/60 dark:bg-purple-700/60";case"legendary":return"bg-yellow-200/60 dark:bg-yellow-700/60"}})()} backdrop-blur-sm`,children:(0,d.jsx)(T.A,{className:"h-3.5 w-3.5 text-yellow-600 dark:text-yellow-400"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("h4",{className:"text-[11px] font-semibold line-clamp-1 mb-0.5",children:a.title}),(0,d.jsx)("div",{className:`inline-block px-1.5 py-0.5 rounded-full text-[9px] font-medium ${"common"===a.rarity?"bg-gray-200 text-gray-700 dark:bg-gray-700 dark:text-gray-300":"rare"===a.rarity?"bg-blue-200 text-blue-700 dark:bg-blue-700 dark:text-blue-300":"epic"===a.rarity?"bg-purple-200 text-purple-700 dark:bg-purple-700 dark:text-purple-300":"bg-yellow-200 text-yellow-700 dark:bg-yellow-700 dark:text-yellow-300"}`,children:a.rarity})]})]}),(0,d.jsxs)("div",{className:"space-y-0.5",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,d.jsx)("span",{className:"text-muted-foreground font-medium",children:"Progress"}),(0,d.jsxs)("span",{className:"font-bold",children:[a.progress,"/",a.total]})]}),(0,d.jsx)(M.k,{value:a.progressPercentage,className:`h-1 ${a.progressPercentage>=90?"[&>div]:bg-green-500":"[&>div]:bg-orange-500"}`})]})]})},a.id)))}),!b&&(0,d.jsx)(D(),{href:"/achievements",children:(0,d.jsx)(f.$,{variant:"ghost",className:"w-full mt-4 text-sm backdrop-blur-sm",children:"View All Achievements"})})]}),!b&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(N.w,{className:"mx-4"}),(0,d.jsxs)("div",{className:"p-3 sm:p-4",children:[(0,d.jsx)("h3",{className:"mb-2 sm:mb-3 text-xs sm:text-sm font-semibold text-muted-foreground uppercase tracking-wider",children:"Today's Summary"}),(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,d.jsxs)("div",{className:"text-center p-3 rounded-lg bg-muted/50",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-primary",children:m.completed}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:"Completed"})]}),(0,d.jsxs)("div",{className:"text-center p-3 rounded-lg bg-muted/50",children:[(0,d.jsx)("div",{className:"text-2xl font-bold text-accent",children:m.pending}),(0,d.jsx)("div",{className:"text-xs text-muted-foreground",children:"Pending"})]})]})]})]})]}),(0,d.jsx)("div",{className:"p-3 sm:p-4 border-t mt-auto",children:b?(0,d.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>t("light"),title:"Light",children:(0,d.jsx)(r.A,{className:"h-4 w-4"})}),(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>t("dark"),title:"Dark",children:(0,d.jsx)(q.A,{className:"h-4 w-4"})}),(0,d.jsx)(D(),{href:"/",children:(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"h-8 w-8",title:"Logout",children:(0,d.jsx)(y.A,{className:"h-4 w-4"})})})]}):(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("span",{className:"text-xs text-muted-foreground",children:"Theme"}),(0,d.jsxs)("div",{className:"flex items-center gap-1",children:[(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>t("light"),title:"Light",children:(0,d.jsx)(r.A,{className:"h-4 w-4"})}),(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>t("dark"),title:"Dark",children:(0,d.jsx)(q.A,{className:"h-4 w-4"})}),(0,d.jsx)(f.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>t("system"),title:"System",children:(0,d.jsx)(s.A,{className:"h-4 w-4"})})]})]}),(0,d.jsx)(D(),{href:"/",children:(0,d.jsxs)(f.$,{variant:"outline",className:"w-full",children:[(0,d.jsx)(y.A,{className:"h-4 w-4 mr-2"})," Logout"]})})]})})]})}c(72819);var V=c(58475);class W{static getInstance(){return W.instance||(W.instance=new W),W.instance}start(){this.intervalId=setInterval(()=>{this.checkDueDates()},36e5),this.checkDueDates()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}checkDueDates(){try{let a=JSON.parse(localStorage.getItem("goals")||"[]"),b=new Date;a.forEach(a=>{if(!a.dueDate||a.completedAt||"active"!==a.status)return;let c=new Date(a.dueDate),d=c.getTime()-b.getTime(),e=Math.ceil(d/864e5);if(e<=1&&e>=0){let b=`due-${a.id}-${c.toDateString()}`;localStorage.getItem(b)||(V.$.goalDueSoon(a.title,e),localStorage.setItem(b,"true"))}})}catch(a){console.error("Error checking due dates:",a)}}constructor(){this.intervalId=null}}W.getInstance();let X=(0,e.createContext)(void 0);function Y({children:a}){let[b,c]=(0,e.useState)(null),[f,g]=(0,e.useState)(!0);return(0,d.jsx)(X.Provider,{value:{user:b,setUser:c,isLoading:f},children:a})}function Z({children:a}){return(0,d.jsx)(Y,{children:(0,d.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,d.jsx)("aside",{className:"hidden md:block",children:(0,d.jsx)(U,{})}),(0,d.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,d.jsx)(L,{}),(0,d.jsx)("main",{className:"flex-1 overflow-y-auto scrollbar-thin",children:(0,d.jsx)("div",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6 animate-fade-in text-[13.5px] sm:text-[14.5px] md:text-base leading-tight sm:leading-relaxed",children:a})})]})]})})}},38502:(a,b,c)=>{"use strict";c.d(b,{Toaster:()=>g});var d=c(21124),e=c(45523),f=c(42830);let g=({...a})=>{let{theme:b="system"}=(0,e.D)();return(0,d.jsx)(f.l$,{theme:b,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...a})}},44327:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call ThemeProvider() from the server but ThemeProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\mgift\\OneDrive\\Desktop\\Commitly\\Commitly\\frontend\\components\\theme-provider.tsx","ThemeProvider")},46055:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(97523);let e=async a=>[{type:"image/x-icon",sizes:"32x32",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},52681:(a,b,c)=>{"use strict";c.d(b,{N:()=>d,_:()=>e});let d=(0,c(53774).createClientComponentClient)(),e={signUp:async(a,b,c)=>{let{data:e,error:f}=await d.auth.signUp({email:a,password:b,options:{data:{full_name:c}}});if(f)throw f;return e},signIn:async(a,b)=>{let{data:c,error:e}=await d.auth.signInWithPassword({email:a,password:b});if(e)throw e;return c},signOut:async()=>{await d.auth.signOut()},signInWithGoogle:async()=>{let{data:a,error:b}=await d.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(b)throw b;return a},getCurrentUser:async()=>{let{data:{user:a}}=await d.auth.getUser();return a},getSession:async()=>{let{data:{session:a}}=await d.auth.getSession();return a},hasCompletedKyc:async()=>{let a=await e.getCurrentUser();if(!a)return!1;let{data:b}=await d.from("profiles").select("has_completed_kyc").eq("id",a.id).maybeSingle();return b?.has_completed_kyc===!0},clearSession:async()=>{await d.auth.signOut()},resetPassword:async a=>{let{error:b}=await d.auth.resetPasswordForEmail(a,{redirectTo:`${window.location.origin}/auth/reset-password/confirm`});if(b)throw b},updatePassword:async a=>{let{error:b}=await d.auth.updateUser({password:a});if(b)throw b}}},56287:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},58475:(a,b,c)=>{"use strict";c.d(b,{$:()=>e});class d{static getInstance(){return d.instance||(d.instance=new d),d.instance}async init(){if("serviceWorker"in navigator&&"Notification"in window)try{(await fetch("/sw.js",{method:"HEAD"})).ok?this.registration=await navigator.serviceWorker.register("/sw.js"):console.log("Service worker file not found, notifications will work without service worker"),await this.requestPermission()}catch(a){console.log("Service worker registration skipped:",a instanceof Error?a.message:String(a)),await this.requestPermission()}}async requestPermission(){if(!("Notification"in window))return!1;try{let a=await Notification.requestPermission();return"granted"===a}catch(a){return console.log("Notification permission request failed:",a instanceof Error?a.message:String(a)),!1}}async sendNotification(a,b={}){if(!("Notification"in window)||!await this.requestPermission())return;let c={icon:"/icon-192x192.png",badge:"/icon-192x192.png",tag:"commitly-notification",...b};this.registration?await this.registration.showNotification(a,c):new Notification(a,c)}async goalCreated(a){await this.sendNotification("\uD83C\uDFAF New Goal Created!",{body:`"${a}" has been added to your goals`,tag:"goal-created"})}async goalCompleted(a){await this.sendNotification("\uD83C\uDF89 Goal Completed!",{body:`Congratulations! You completed "${a}"`,tag:"goal-completed"})}async goalDueSoon(a,b){await this.sendNotification("⏰ Goal Due Soon",{body:`"${a}" is due in ${b} day${1!==b?"s":""}`,tag:"goal-due"})}async partnerRequest(a){await this.sendNotification("\uD83D\uDC65 New Partner Request",{body:`${a} wants to be your accountability partner`,tag:"partner-request"})}async partnerAccepted(a){await this.sendNotification("✅ Partner Request Accepted",{body:`${a} accepted your accountability partner request`,tag:"partner-accepted"})}async partnerDeclined(a){await this.sendNotification("❌ Partner Request Declined",{body:`${a} declined your accountability partner request`,tag:"partner-declined"})}async newFollower(a){await this.sendNotification("\uD83D\uDC64 New Follower",{body:`${a} started following you`,tag:"new-follower"})}async encouragementReceived(a,b){await this.sendNotification("\uD83D\uDCAA Encouragement Received",{body:`${a} sent you encouragement for "${b}"`,tag:"encouragement"})}constructor(){this.registration=null}}let e=d.getInstance()},58690:(a,b,c)=>{Promise.resolve().then(c.bind(c,44327)),Promise.resolve().then(c.bind(c,20656)),Promise.resolve().then(c.bind(c,25927))},64385:(a,b,c)=>{"use strict";c.d(b,{ThemeProvider:()=>f});var d=c(21124);c(38301);var e=c(45523);function f({children:a,...b}){return(0,d.jsx)(e.N,{...b,children:a})}},72819:(a,b,c)=>{"use strict";c.d(b,{$:()=>f,checkAndUnlockAchievements:()=>g,d:()=>e});var d=c(52681);let e=[{id:"first-goal",name:"First Goal",title:"First Goal",description:"Create your first goal",icon:"target",rarity:"common",condition:(a,b)=>({unlocked:a.length>=1,progress:Math.min(a.length,1),total:1})},{id:"goal-achiever",name:"Goal Achiever",title:"Goal Achiever",description:"Complete your first goal",icon:"trophy",rarity:"common",condition:(a,b)=>({unlocked:a.filter(a=>"completed"===a.status||a.completed_at).length>=1,progress:Math.min(a.filter(a=>"completed"===a.status||a.completed_at).length,1),total:1})},{id:"goal-master",name:"Goal Master",title:"Goal Master",description:"Complete 10 goals",icon:"star",rarity:"rare",condition:(a,b)=>({unlocked:a.filter(a=>"completed"===a.status||a.completed_at).length>=10,progress:a.filter(a=>"completed"===a.status||a.completed_at).length,total:10})}];function f(a,b){return e.map(c=>{let d=c.condition(a,b);return{...c,unlocked:d.unlocked,progress:d.progress,total:d.total,progressPercentage:Math.round(d.progress/d.total*100)}})}async function g(a,b,c){try{let{data:c}=await d.N.from("user_achievements").select("achievement_id").eq("user_id",a),e=new Set(c?.map(a=>a.achievement_id)||[]),{data:f}=await d.N.from("achievements").select("*");if(!f)return;let g=[];for(let c of f){if(e.has(c.id))continue;let f=!1;switch(c.name){case"First Goal":if("goal_created"===b){let{data:b}=await d.N.from("goals").select("id").eq("user_id",a);f=(b?.length||0)>=1}break;case"Goal Achiever":if("goal_completed"===b){let{data:b}=await d.N.from("goals").select("id").eq("user_id",a).eq("status","completed");f=(b?.length||0)>=1}break;case"Goal Master":if("goal_completed"===b){let{data:b}=await d.N.from("goals").select("id").eq("user_id",a).eq("status","completed");f=(b?.length||0)>=10}break;case"Social Butterfly":if("partner_added"===b){let{data:b}=await d.N.from("accountability_partners").select("id").or(`user_id.eq.${a},partner_id.eq.${a}`).eq("status","accepted");f=(b?.length||0)>=1}}f&&(await d.N.from("user_achievements").insert({user_id:a,achievement_id:c.id}),await d.N.from("notifications").insert({user_id:a,title:"Achievement Unlocked!",message:`You earned "${c.name}" - ${c.description}`,type:"achievement_unlocked",read:!1,data:{achievement_id:c.id}}),g.push(c))}return g}catch(a){return console.error("Error checking achievements:",a),[]}}},74439:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},76842:(a,b,c)=>{Promise.resolve().then(c.bind(c,64385)),Promise.resolve().then(c.bind(c,38502)),Promise.resolve().then(c.bind(c,73329))},82704:()=>{},88020:(a,b,c)=>{"use strict";c.d(b,{k:()=>g});var d=c(21124);c(38301);var e=c(95766),f=c(15514);function g({className:a,indicatorClassName:b,value:c,...g}){return(0,d.jsx)(e.bL,{"data-slot":"progress",className:(0,f.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...g,children:(0,d.jsx)(e.C1,{"data-slot":"progress-indicator",className:(0,f.cn)("h-full w-full flex-1 bg-primary transition-all",b),style:{transform:`translateX(-${100-(c||0)}%)`}})})}}};