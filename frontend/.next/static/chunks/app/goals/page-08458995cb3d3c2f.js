(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3341],{20120:(e,t,a)=>{"use strict";a.d(t,{$v:()=>h,EO:()=>u,Lt:()=>i,Rx:()=>p,Zr:()=>f,ck:()=>x,r7:()=>g,tv:()=>o,wd:()=>m});var s=a(95155);a(12115);var r=a(35646),l=a(25016),n=a(97003);function i(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"alert-dialog",...t})}function o(e){let{...t}=e;return(0,s.jsx)(r.l9,{"data-slot":"alert-dialog-trigger",...t})}function d(e){let{...t}=e;return(0,s.jsx)(r.ZL,{"data-slot":"alert-dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(r.hJ,{"data-slot":"alert-dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(c,{}),(0,s.jsx)(r.UC,{"data-slot":"alert-dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(r.hE,{"data-slot":"alert-dialog-title",className:(0,l.cn)("text-lg font-semibold",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(r.VY,{"data-slot":"alert-dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)(r.rc,{className:(0,l.cn)((0,n.r)(),t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(r.ZD,{className:(0,l.cn)((0,n.r)({variant:"outline"}),t),...a})}},47507:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>x,gC:()=>m,l6:()=>d,yv:()=>c});var s=a(95155);a(12115);var r=a(98229),l=a(24033),n=a(5917),i=a(12108),o=a(25016);function d(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"select",...t})}function c(e){let{...t}=e;return(0,s.jsx)(r.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:a="default",children:n,...i}=e;return(0,s.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":a,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,(0,s.jsx)(r.In,{asChild:!0,children:(0,s.jsx)(l.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:a,position:l="popper",...n}=e;return(0,s.jsx)(r.ZL,{children:(0,s.jsxs)(r.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[(0,s.jsx)(g,{}),(0,s.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(h,{})]})})}function x(e){let{className:t,children:a,...l}=e;return(0,s.jsxs)(r.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...l,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(r.VF,{children:(0,s.jsx)(n.A,{className:"size-4"})})}),(0,s.jsx)(r.p4,{children:a})]})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(i.A,{className:"size-4"})})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(l.A,{className:"size-4"})})}},53424:(e,t,a)=>{Promise.resolve().then(a.bind(a,86477))},54679:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>u,L3:()=>x,c7:()=>m,lG:()=>i,rr:()=>g,zM:()=>o});var s=a(95155);a(12115);var r=a(89511),l=a(65229),n=a(25016);function i(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,s.jsx)(r.l9,{"data-slot":"dialog-trigger",...t})}function d(e){let{...t}=e;return(0,s.jsx)(r.ZL,{"data-slot":"dialog-portal",...t})}function c(e){let{className:t,...a}=e;return(0,s.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,children:a,showCloseButton:i=!0,...o}=e;return(0,s.jsxs)(d,{"data-slot":"dialog-portal",children:[(0,s.jsx)(c,{}),(0,s.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...o,children:[a,i&&(0,s.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(l.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}},67001:(e,t,a)=>{"use strict";a.d(t,{T:()=>l});var s=a(95155);a(12115);var r=a(25016);function l(e){let{className:t,...a}=e;return(0,s.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...a})}},83209:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>i,Zp:()=>l,aR:()=>n});var s=a(95155);a(12115);var r=a(25016);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}},86477:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>B});var s=a(95155),r=a(12115),l=a(97003),n=a(33789),i=a(83209),o=a(67812),d=a(55850),c=a(90923),u=a(47507),m=a(7220),x=a(8198),g=a(61362),h=a(30814),p=a(16485),f=a(1524),j=a(52472),v=a(26983),b=a(86651),N=a(63581),w=a(91169),y=a(39347),k=a(62512),A=a(99708),S=a(5937),_=a(37772),C=a(57828),D=a(11010),G=a(71360),E=a(68854),P=a(20508),z=a(39068),O=a(52619),T=a.n(O),L=a(20063),I=a(18720),M=a(19885),R=a(54679),V=a(20120),Z=a(94923),F=a(42855);let J=e=>{switch(e){case"active":return"bg-green-500";case"completed":return"bg-blue-500";case"paused":return"bg-yellow-500";case"pending":return"bg-orange-500";default:return"bg-gray-500"}},$=new Set(["6","7","9","10","11","12"]),q=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mock-user-id";return!(!e.goalOwner||e.accountabilityPartners.some(e=>e.id===t))&&$.has(e.goalOwner.id)},U=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mock-user-id";return e.goalOwner?e.goalOwner.id===t:!e.accountabilityPartners.some(e=>e.id===t)},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mock-user-id";return!U(e,t)&&"public"===e.visibility&&q(e,t)};function B(){let[e,t]=(0,r.useState)(""),[a,d]=(0,r.useState)("all"),[m,x]=(0,r.useState)("all"),[g,y]=(0,r.useState)("all"),[k,A]=(0,r.useState)("recent"),[S,_]=(0,r.useState)([]),[C,D]=(0,r.useState)(!1),G=(0,L.useRouter)();(0,r.useEffect)(()=>{let e=async()=>{try{let e=await F._.getCurrentUser();if(!e){console.log("No user logged in"),_([]);return}let{data:t,error:a}=await F.N.from("goals").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});a&&console.error("Error fetching user goals:",a);let s=await Promise.all((t||[]).map(async e=>{var t,a;if("multi-activity"===e.goal_type){let{data:t}=await F.N.from("goal_activities").select("*").eq("goal_id",e.id).order("order_index",{ascending:!0});return{...e,activities:t||[],type:e.goal_type,userId:e.user_id,createdAt:e.created_at,visibility:e.visibility,status:e.status,category:null==(a=e.category)?void 0:a.replace("_"," "),priority:e.priority,dueDate:e.target_date,isPartnerGoal:!1}}return{...e,activities:[],type:e.goal_type,userId:e.user_id,createdAt:e.created_at,visibility:e.visibility,status:e.status,category:null==(t=e.category)?void 0:t.replace("_"," "),priority:e.priority,dueDate:e.target_date,isPartnerGoal:!1}}));console.log("Loaded goals from database:",s),_(s)}catch(e){console.error("Error loading goals:",e),_([])}};e();let t=()=>e();return window.addEventListener("goalDeleted",t),window.addEventListener("goalUpdated",t),window.addEventListener("goalCreated",t),()=>{window.removeEventListener("goalDeleted",t),window.removeEventListener("goalUpdated",t),window.removeEventListener("goalCreated",t)}},[]);let E=r.useMemo(()=>S.map(e=>{let t=0,a=0,s=0;if(e.activities&&Array.isArray(e.activities)){if("multi-activity"===e.type)s=e.activities.length,a=e.activities.filter(e=>e.completed).length,t=s>0?Math.round(a/s*100):0;else if("single-activity"===e.type){let r=e.activities[0];a=+(100==(t=r&&r.completed?100:0)),s=1}}let r=0;if("recurring"===e.scheduleType&&"single-activity"!==e.type){let t=Math.floor((Date.now()-new Date(e.createdAt).getTime())/864e5);t>=1&&(r=void 0!==e.streak?e.streak:Math.min(t,5))}let l=e.status||"active";return(e.completedAt||100===t)&&(l="completed"),{id:String(e.id),title:e.title,description:e.description||"",type:e.type,status:l,progress:"completed"===l?100:t,streak:r,totalCompletions:a,visibility:e.visibility||"private",createdAt:e.createdAt,dueDate:e.dueDate,category:e.category||"Personal",priority:e.priority||"medium",isForked:!1,forkedFrom:null,accountabilityPartners:e.accountabilityPartners||[],isGroupGoal:e.isGroupGoal||!1,groupMembers:e.groupMembers||[],recurrencePattern:e.recurrencePattern,recurrenceDays:e.recurrenceDays,scheduleType:e.scheduleType,isPartnerGoal:e.isPartnerGoal||!1,ownerName:e.ownerName,goalOwner:e.ownerName?{id:e.userId,name:e.ownerName,avatar:"/placeholder-avatar.jpg"}:void 0,is_seasonal:e.is_seasonal||!1,duration_type:e.duration_type||"standard",seasonal_year:e.seasonal_year,seasonal_quarter:e.seasonal_quarter,updated_at:e.updated_at,completed_at:e.completed_at}}),[S]),P=E.filter(t=>{let s=t.title.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase()),r="all"===a||t.type===a,l="all"===m||t.status===m,n="all"===g||t.category===g;return s&&r&&l&&n}),z=P.filter(e=>U(e)&&!e.isPartnerGoal),O=P.filter(e=>e.accountabilityPartners.some(e=>"mock-user-id"===e.id)&&!U(e)||e.isPartnerGoal),I=Array.from(new Set(E.map(e=>e.category))),R=[...P].sort((e,t)=>{switch(k){case"recent":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();case"progress":return t.progress-e.progress;case"streak":return t.streak-e.streak;case"priority":let a={high:3,medium:2,low:1};return a[t.priority]-a[e.priority];default:return 0}}),V={total:E.length,active:E.filter(e=>"active"===e.status).length,completed:E.filter(e=>"completed"===e.status).length,paused:E.filter(e=>"paused"===e.status).length,pending:E.filter(e=>"pending"===e.status).length};return(0,s.jsx)(M.O,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Goals"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Track and manage your personal goals"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsx)(T(),{href:"/goals/create",children:(0,s.jsxs)(l.$,{className:"hover-lift",variant:"default",children:[(0,s.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Standard Goal"]})}),(0,s.jsx)(T(),{href:"/goals/seasonal/create",children:(0,s.jsxs)(l.$,{className:"hover-lift",variant:"outline",children:[(0,s.jsx)(p.A,{className:"h-4 w-4 mr-2"}),"Seasonal Goal"]})})]})]}),(0,s.jsx)("div",{className:"border rounded-lg p-3 sm:p-4 bg-card",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-3 sm:gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-primary/10",children:(0,s.jsx)(h.A,{className:"h-4 w-4 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-base sm:text-lg md:text-xl font-bold",children:V.total}),(0,s.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Total"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-green-500/10",children:(0,s.jsx)(f.A,{className:"h-4 w-4 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-base sm:text-lg md:text-xl font-bold",children:V.active}),(0,s.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Active"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-blue-500/10",children:(0,s.jsx)(j.A,{className:"h-4 w-4 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-base sm:text-lg md:text-xl font-bold",children:V.completed}),(0,s.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Done"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-yellow-500/10",children:(0,s.jsx)(v.A,{className:"h-4 w-4 text-yellow-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-base sm:text-lg md:text-xl font-bold",children:V.paused}),(0,s.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Paused"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-blue-500/10",children:(0,s.jsx)(v.A,{className:"h-4 w-4 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-base sm:text-lg md:text-xl font-bold",children:V.pending}),(0,s.jsx)("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Pending"})]})]})]})}),(0,s.jsx)(i.Zp,{children:(0,s.jsx)(i.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(b.A,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,s.jsx)(n.p,{placeholder:"Search goals...",value:e,onChange:e=>t(e.target.value),className:"pl-10"})]}),(0,s.jsxs)("div",{className:"flex gap-2 flex-wrap overflow-x-auto",children:[(0,s.jsxs)(u.l6,{value:a,onValueChange:d,children:[(0,s.jsx)(u.bq,{className:"w-28 sm:w-32 text-xs sm:text-sm",children:(0,s.jsx)(u.yv,{placeholder:"Type"})}),(0,s.jsxs)(u.gC,{children:[(0,s.jsx)(u.eb,{value:"all",children:"All Types"}),(0,s.jsx)(u.eb,{value:"single",children:"Single"}),(0,s.jsx)(u.eb,{value:"recurring",children:"Recurring"}),(0,s.jsx)(u.eb,{value:"multi",children:"Multi-step"})]})]}),(0,s.jsxs)(u.l6,{value:m,onValueChange:x,children:[(0,s.jsx)(u.bq,{className:"w-28 sm:w-32 text-xs sm:text-sm",children:(0,s.jsx)(u.yv,{placeholder:"Status"})}),(0,s.jsxs)(u.gC,{children:[(0,s.jsx)(u.eb,{value:"all",children:"All Status"}),(0,s.jsx)(u.eb,{value:"active",children:"Active"}),(0,s.jsx)(u.eb,{value:"completed",children:"Completed"}),(0,s.jsx)(u.eb,{value:"paused",children:"Paused"})]})]}),(0,s.jsxs)(u.l6,{value:g,onValueChange:y,children:[(0,s.jsxs)(u.bq,{className:"w-32 sm:w-40 text-xs sm:text-sm",children:[(0,s.jsx)(N.A,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2"}),(0,s.jsx)(u.yv,{placeholder:"Category"})]}),(0,s.jsxs)(u.gC,{children:[(0,s.jsx)(u.eb,{value:"all",children:"All Categories"}),I.map(e=>(0,s.jsx)(u.eb,{value:e,children:e},e))]})]}),(0,s.jsxs)(u.l6,{value:k,onValueChange:A,children:[(0,s.jsx)(u.bq,{className:"w-28 sm:w-32 text-xs sm:text-sm",children:(0,s.jsx)(u.yv,{placeholder:"Sort"})}),(0,s.jsxs)(u.gC,{children:[(0,s.jsx)(u.eb,{value:"recent",children:"Recent"}),(0,s.jsx)(u.eb,{value:"progress",children:"Progress"}),(0,s.jsx)(u.eb,{value:"streak",children:"Streak"}),(0,s.jsx)(u.eb,{value:"priority",children:"Priority"})]})]})]})]})})}),(0,s.jsxs)(c.tU,{defaultValue:"all",className:"space-y-4",children:[(0,s.jsxs)(c.j7,{className:"grid w-full grid-cols-6",children:[(0,s.jsxs)(c.Xi,{value:"all",children:["All (",R.length,")"]}),(0,s.jsxs)(c.Xi,{value:"my-goals",children:["My Goals (",z.length,")"]}),(0,s.jsxs)(c.Xi,{value:"partner-goals",children:["Partners (",O.length,")"]}),(0,s.jsxs)(c.Xi,{value:"active",children:["Active (",V.active,")"]}),(0,s.jsxs)(c.Xi,{value:"pending",children:["Pending (",V.pending,")"]}),(0,s.jsxs)(c.Xi,{value:"completed",children:["Done (",V.completed,")"]})]}),(0,s.jsxs)(c.av,{value:"all",className:"space-y-6",children:[z.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-5 w-5 text-primary"}),(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"My Goals"}),(0,s.jsx)(o.E,{variant:"outline",children:z.length})]}),(0,s.jsx)(X,{goals:z,router:G,isPartnerView:!1,onGoalDeleted:()=>{_(JSON.parse(localStorage.getItem("goals")||"[]"))}})]}),O.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.A,{className:"h-5 w-5 text-green-600"}),(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Accountability Partner Goals"}),(0,s.jsx)(o.E,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:O.length})]}),(0,s.jsx)(X,{goals:O,router:G,isPartnerView:!0,onGoalDeleted:()=>{_(JSON.parse(localStorage.getItem("goals")||"[]"))}})]}),0===z.length&&0===O.length&&(0,s.jsx)(i.Zp,{children:(0,s.jsxs)(i.Wu,{className:"py-12 text-center",children:[(0,s.jsx)(h.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"No goals found"}),(0,s.jsx)(T(),{href:"/goals/create",children:(0,s.jsx)(l.$,{children:"Create your first goal"})})]})})]}),(0,s.jsx)(c.av,{value:"my-goals",className:"space-y-4",children:(0,s.jsx)(X,{goals:z,router:G,isPartnerView:!1,onGoalDeleted:()=>{_(JSON.parse(localStorage.getItem("goals")||"[]"))}})}),(0,s.jsx)(c.av,{value:"partner-goals",className:"space-y-4",children:0===O.length?(0,s.jsx)(i.Zp,{children:(0,s.jsxs)(i.Wu,{className:"py-12 text-center",children:[(0,s.jsx)(w.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"No partner goals found"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Partner goals will appear here when you're added as an accountability partner"})]})}):(0,s.jsx)(X,{goals:O,router:G,isPartnerView:!0,onGoalDeleted:()=>{_(JSON.parse(localStorage.getItem("goals")||"[]"))}})}),(0,s.jsx)(c.av,{value:"active",className:"space-y-4",children:(0,s.jsx)(X,{goals:R.filter(e=>"active"===e.status),router:G,onGoalDeleted:()=>{_(JSON.parse(localStorage.getItem("goals")||"[]"))}})}),(0,s.jsx)(c.av,{value:"pending",className:"space-y-4",children:(0,s.jsx)(X,{goals:R.filter(e=>"pending"===e.status),router:G,onGoalDeleted:()=>{_(JSON.parse(localStorage.getItem("goals")||"[]"))}})}),(0,s.jsx)(c.av,{value:"completed",className:"space-y-4",children:(0,s.jsx)(X,{goals:R.filter(e=>"completed"===e.status),router:G,onGoalDeleted:()=>{_(JSON.parse(localStorage.getItem("goals")||"[]"))}})})]})]})})}function X(e){let{goals:t,router:a,isPartnerView:n=!1,onGoalDeleted:c}=e,[u,f]=(0,r.useState)(null),[j,v]=(0,r.useState)(()=>{let e={};return t.forEach(a=>{e[String(a.id)]=n&&t.indexOf(a)%5==0?"pending":"accepted"}),e}),[b,N]=(0,r.useState)(()=>{let e={};return t.forEach(a=>{e[String(a.id)]=a.isGroupGoal&&!n&&t.indexOf(a)%4==0?"pending":"accepted"}),e});(0,r.useEffect)(()=>{},[]);let O=(e,t,a)=>{if(!e)return!1;if("pending"===t&&a){let e=new Date(a).getTime();return Date.now()<=e-18e6}let s=new Date(e).getTime();return Date.now()-s<=18e6},L=async(e,t)=>{try{let{error:a}=await F.N.from("goals").delete().eq("id",e);if(a){console.error("Error deleting goal:",a),I.oR.error("Failed to delete goal");return}I.oR.success('Goal "'.concat(t,'" deleted successfully')),window.dispatchEvent(new CustomEvent("goalDeleted",{detail:{goalId:e}})),c&&c()}catch(e){console.error("Error deleting goal:",e),I.oR.error("Failed to delete goal")}},M=(e,t)=>{a.push("/goals/".concat(e))};return 0===t.length?(0,s.jsx)(i.Zp,{children:(0,s.jsxs)(i.Wu,{className:"py-12 text-center",children:[(0,s.jsx)(h.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"No goals found"}),(0,s.jsx)(T(),{href:"/goals/create",children:(0,s.jsx)(l.$,{children:"Create your first goal"})})]})}):(0,s.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t.map((e,t)=>{var r,c,u;return(0,s.jsxs)(i.Zp,{className:"hover-lift group transition-all duration-300 hover:shadow-xl hover:shadow-slate-900/20 hover:-translate-y-1 border-0 shadow-slate-900/15 bg-gradient-to-br from-card via-card to-card/95 backdrop-blur-sm ".concat("completed"===e.status?"ring-1 ring-green-200/50 hover:ring-green-300/70 shadow-green-100/50 hover:shadow-green-200/60 bg-gradient-to-br from-green-50/60 via-white to-green-50/30 dark:from-green-950/30 dark:via-background dark:to-green-950/20":e.is_seasonal||"seasonal"===e.duration_type?"ring-1 ring-amber-200/50 hover:ring-amber-300/70 shadow-amber-100/50 hover:shadow-amber-200/60 bg-gradient-to-br from-amber-50/60 via-white to-amber-50/30 dark:from-amber-950/30 dark:via-background dark:to-amber-950/20":e.isGroupGoal?"ring-1 ring-purple-200/50 hover:ring-purple-300/70 shadow-purple-100/50 hover:shadow-purple-200/60 bg-gradient-to-br from-purple-50/60 via-white to-purple-50/30 dark:from-purple-950/30 dark:via-background dark:to-purple-950/20":e.isForked?"ring-1 ring-blue-200/50 hover:ring-blue-300/70 shadow-blue-100/50 hover:shadow-blue-200/60 bg-gradient-to-br from-blue-50/60 via-white to-blue-50/30 dark:from-blue-950/30 dark:via-background dark:to-blue-950/20":"ring-1 ring-border/50 hover:ring-primary/30 shadow-slate-100/50 hover:shadow-slate-200/60"),children:[(0,s.jsxs)(i.aR,{className:"pb-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"recurring":return(0,s.jsx)(x.A,{className:"h-4 w-4"});case"single":return(0,s.jsx)(g.A,{className:"h-4 w-4"});default:return(0,s.jsx)(h.A,{className:"h-4 w-4"})}})(e.type),(0,s.jsx)(o.E,{variant:"outline",className:"text-xs shadow-sm bg-background/80 backdrop-blur-sm border-primary/20 hover:border-primary/40 transition-colors duration-200",children:e.type}),(e.is_seasonal||"seasonal"===e.duration_type)&&(0,s.jsxs)(o.E,{variant:"outline",className:"text-xs bg-gradient-to-r from-amber-50 to-amber-100 text-amber-700 border-amber-200 shadow-sm hover:shadow-amber-200/50 transition-all duration-200",children:[(0,s.jsx)(y.A,{className:"h-3 w-3 mr-1"}),"Seasonal"]}),e.isGroupGoal&&(0,s.jsxs)(o.E,{variant:"outline",className:"text-xs bg-gradient-to-r from-purple-50 to-purple-100 text-purple-700 border-purple-200 shadow-sm hover:shadow-purple-200/50 transition-all duration-200",children:[(0,s.jsx)(w.A,{className:"h-3 w-3 mr-1"}),"Group"]}),e.recurrencePattern&&(0,s.jsxs)(o.E,{variant:"outline",className:"text-xs shadow-sm bg-background/80 backdrop-blur-sm border-blue-200/50 hover:border-blue-300/70 transition-colors duration-200",children:[(0,s.jsx)(p.A,{className:"h-3 w-3 mr-1"}),(e=>{let t=e.recurrencePattern;if(!t)return null;if("custom"!==t)return t.charAt(0).toUpperCase()+t.slice(1);let a=e.recurrenceDays||[],s={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return 0===a.length?"Custom":a.map(e=>s[e]||e).slice(0,3).join("/")})(e)]}),e.isForked&&U(e)&&(0,s.jsxs)(o.E,{variant:"outline",className:"text-xs bg-gradient-to-r from-blue-50 to-blue-100 text-blue-700 border-blue-200 shadow-sm hover:shadow-blue-200/50 transition-all duration-200",children:[(0,s.jsx)(k.A,{className:"h-3 w-3 mr-1"}),"Forked"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[!n&&!O(e.createdAt)&&(0,s.jsx)("div",{className:"h-8 w-8 flex items-center justify-center",title:"Editing period ended (5 hours)",children:(0,s.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"})}),!n&&(e.accountabilityPartners&&e.accountabilityPartners.length>0||e.isGroupGoal)&&(0,s.jsxs)(R.lG,{children:[(0,s.jsx)(R.zM,{asChild:!0,children:(0,s.jsxs)("div",{className:"relative h-8 w-8 flex items-center justify-center cursor-pointer",title:"View encouragement notes",children:[(0,s.jsx)(S.A,{className:"h-4 w-4 text-primary"}),(()=>{let t=(()=>{try{return JSON.parse(localStorage.getItem("encouragement_".concat(e.id))||"[]").filter(e=>!e.read).length}catch(e){return 0}})();return t>0&&(0,s.jsx)("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center h-4 min-w-4 px-1 rounded-full text-[10px] bg-primary text-primary-foreground",children:t})})()]})}),(0,s.jsxs)(R.Cf,{children:[(0,s.jsx)(R.c7,{children:(0,s.jsx)(R.L3,{children:"Encouragement Notes"})}),(0,s.jsx)(Z.I,{goalId:e.id,goalOwnerName:(null==(r=e.goalOwner)?void 0:r.name)||"You"})]})]}),!n&&W(e)&&(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>{I.oR.success("Goal forked! (Mock Mode)"),a.push("/goals/create")},children:(0,s.jsx)(k.A,{className:"h-4 w-4"})}),!n&&U(e)&&(0,s.jsxs)(m.rI,{children:[(0,s.jsx)(m.ty,{asChild:!0,children:(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity blob-bounce",children:(0,s.jsx)(_.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(m.SQ,{align:"end",children:[(0,s.jsxs)(m._2,{onClick:()=>M(e.id,e),children:[(0,s.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"View Details"]}),"completed"!==e.status&&(0,s.jsxs)(m._2,{onClick:()=>{let t="seasonal"===e.duration_type||e.is_seasonal?"/goals/seasonal/".concat(e.id,"/update"):"/goals/".concat(e.id,"/update");a.push(t)},children:[(0,s.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Update Goal"]}),O(e.createdAt,e.status,e.start_date)&&"completed"!==e.status&&(0,s.jsxs)(m._2,{onClick:()=>{let t="seasonal"===e.duration_type||e.is_seasonal?"/goals/seasonal/".concat(e.id,"/edit"):"/goals/".concat(e.id,"/edit");a.push(t)},children:[(0,s.jsx)(D.A,{className:"mr-2 h-4 w-4"}),"Edit Goal"]}),((e,t)=>{if(!e||"completed"===t)return!1;let a=new Date(e).getTime();return Date.now()-a<=864e5})(e.createdAt,e.status)&&(0,s.jsxs)(V.Lt,{children:[(0,s.jsx)(V.tv,{asChild:!0,children:(0,s.jsxs)(m._2,{className:"text-destructive",onSelect:e=>e.preventDefault(),children:[(0,s.jsx)(G.A,{className:"mr-2 h-4 w-4"}),"Delete Goal"]})}),(0,s.jsxs)(V.EO,{children:[(0,s.jsxs)(V.wd,{children:[(0,s.jsx)(V.r7,{children:"Delete Goal"}),(0,s.jsxs)(V.$v,{children:['Are you sure you want to delete "',e.title,'"? This action cannot be undone and all progress will be lost.']})]}),(0,s.jsxs)(V.ck,{children:[(0,s.jsx)(V.Zr,{children:"Cancel"}),(0,s.jsx)(V.Rx,{onClick:()=>L(e.id,e.title),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Goal"})]})]})]})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(i.ZB,{className:"line-clamp-2 flex items-center gap-2",children:[e.title,e.isGroupGoal&&(0,s.jsx)(E.A,{className:"h-4 w-4 text-purple-600"}),n&&(0,s.jsxs)(o.E,{variant:"outline",className:"text-xs bg-gradient-to-r from-green-50 to-green-100 text-green-700 border-green-200 shadow-sm hover:shadow-green-200/50 transition-all duration-200",children:[(0,s.jsx)(P.A,{className:"h-3 w-3 mr-1"}),"Partner"]})]}),e.description&&(0,s.jsx)(i.BT,{className:"line-clamp-2",children:e.description}),n&&e.accountabilityPartners.length>0&&(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"Partners:"}),(0,s.jsxs)("div",{className:"flex -space-x-1",children:[e.accountabilityPartners.slice(0,3).map((e,t)=>(0,s.jsx)("div",{className:"w-5 h-5 rounded-full bg-muted border border-background flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-xs font-medium",children:e.name.charAt(0)})},e.id)),e.accountabilityPartners.length>3&&(0,s.jsx)("div",{className:"w-5 h-5 rounded-full bg-muted border border-background flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["+",e.accountabilityPartners.length-3]})})]})]})]})]}),(0,s.jsxs)(i.Wu,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Progress"}),(0,s.jsxs)("span",{className:"font-medium",children:[e.progress,"%"]})]}),(0,s.jsx)(d.k,{value:e.progress,className:"h-3 rounded-full bg-gradient-to-r from-muted/50 to-muted/30 border border-border/30 shadow-inner ".concat((u=e.progress)<30?"bg-red-500":u<=70?"bg-yellow-500":"bg-green-500")})]}),n?(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[e.goalOwner&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(P.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"Owner:"}),(0,s.jsx)("span",{className:"font-medium",children:e.goalOwner.name})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["private"===e.visibility&&(0,s.jsx)(A.A,{className:"h-3 w-3 text-muted-foreground"}),"restricted"===e.visibility&&(0,s.jsx)(w.A,{className:"h-3 w-3 text-muted-foreground"}),"public"===e.visibility&&(0,s.jsx)(z.A,{className:"h-3 w-3 text-muted-foreground"})]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(g.A,{className:"h-4 w-4 text-green-500"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:"Completed:"}),(0,s.jsx)("span",{className:"font-medium",children:e.totalCompletions})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[e.dueDate&&(()=>{let t=new Date(e.dueDate),a=new Date,r=Math.ceil((t.getTime()-a.getTime())/864e5);return(0,s.jsxs)("div",{className:"flex items-center gap-1 ".concat(r<0||r<=3?"text-red-600":r<=7?"text-yellow-600":"text-blue-600"),children:[(0,s.jsx)(p.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{className:"font-medium",children:r<0?"Overdue":0===r?"Today":1===r?"1d":"".concat(r,"d")})]})})(),(()=>{let t=Date.now()-new Date(e.createdAt).getTime();return"single"!==e.type&&"single-activity"!==e.type&&"date"!==e.scheduleType&&t>864e5&&void 0!==e.streak&&!n&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-orange-600",children:[(0,s.jsx)(x.A,{className:"h-3 w-3"}),(0,s.jsx)("span",{className:"font-medium",children:e.streak})]})})()]}),(0,s.jsx)("div",{className:"space-y-3",children:n?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,s.jsx)("span",{className:"flex items-center gap-2",children:(0,s.jsx)("span",{children:e.category})}),"completed"===e.status?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g.A,{className:"h-3 w-3 text-green-600"}),(0,s.jsx)("span",{className:"text-green-600 font-medium",children:"Completed"})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(J(e.status))}),(0,s.jsx)("span",{className:"capitalize",children:e.status})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 pt-2 border-t",children:[(0,s.jsxs)(l.$,{variant:"outline",size:"sm",className:"flex-1 hover-lift hover:bg-primary hover:text-primary-foreground transition-all duration-200 shadow-sm hover:shadow-md",onClick:()=>M(e.id,e),children:[(0,s.jsx)(C.A,{className:"h-3 w-3 mr-1"}),"View Details"]}),(0,s.jsxs)(R.lG,{children:[(0,s.jsx)(R.zM,{asChild:!0,children:(0,s.jsxs)(l.$,{variant:"outline",size:"sm",className:"flex-1 hover-lift hover:bg-accent hover:text-accent-foreground transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,s.jsx)(S.A,{className:"h-3 w-3 mr-1"}),"Encourage"]})}),(0,s.jsxs)(R.Cf,{children:[(0,s.jsx)(R.c7,{children:(0,s.jsx)(R.L3,{children:"Send Encouragement"})}),(0,s.jsx)(Z.I,{isPartner:!0,goalOwnerName:(null==(c=e.goalOwner)?void 0:c.name)||"Owner"})]})]})]})]}):(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{className:"flex items-center gap-2",children:[e.category,e.isGroupGoal&&b[String(e.id)]&&(0,s.jsx)(o.E,{variant:"accepted"===b[String(e.id)]?"default":"pending"===b[String(e.id)]?"secondary":"outline",className:"text-[10px]",children:"accepted"===b[String(e.id)]?"Joined":"pending"===b[String(e.id)]?"Invite Sent":"Declined"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.isForked&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(k.A,{className:"h-3 w-3 text-blue-600"}),(0,s.jsx)("span",{className:"text-xs text-blue-600",children:"Forked"})]}),(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(J(e.status))}),(0,s.jsx)("span",{className:"capitalize",children:e.status})]})]})})})]})]},"".concat(e.id,"-").concat(t,"-").concat(e.title.replace(/\s+/g,"-").toLowerCase()))})})}},90923:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>o,av:()=>d,j7:()=>i,tU:()=>n});var s=a(95155);a(12115);var r=a(25667),l=a(25016);function n(e){let{className:t,...a}=e;return(0,s.jsx)(r.bL,{"data-slot":"tabs",className:(0,l.cn)("flex flex-col gap-2",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,l.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,l.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,l.cn)("flex-1 outline-none",t),...a})}},94923:(e,t,a)=>{"use strict";a.d(t,{I:()=>p});var s=a(95155),r=a(12115),l=a(83209),n=a(97003),i=a(67001),o=a(67812),d=a(33884),c=a(18085),u=a(5937),m=a(83457),x=a(18720),g=a(31233);let h=e=>JSON.parse(localStorage.getItem("encouragements-".concat(e))||"[]");function p(e){let{isPartner:t=!1,goalOwnerName:a="Goal Owner",goalId:p,onSendEncouragement:f,messages:j=[],newMessageCount:v=0,compact:b=!1}=e,[N,w]=(0,r.useState)(""),[y,k]=(0,r.useState)(!1),[A,S]=(0,r.useState)([]);(0,r.useEffect)(()=>{j&&j.length>0||void 0!==p&&S(h(p).map(e=>({id:e.id,author:{name:e.authorName,avatar:"/placeholder-avatar.jpg"},content:e.content,timestamp:new Date(e.timestamp).toLocaleString()})))},[p]);let _=async()=>{if(N.trim()){k(!0);try{if(f)await f(N);else if(void 0!==p){var e=N.trim();let t="encouragements-".concat(p),a=JSON.parse(localStorage.getItem(t)||"[]");a.push({id:Date.now().toString(),content:e,authorName:"You",timestamp:Date.now()}),localStorage.setItem(t,JSON.stringify(a));let s=h(p);S(s.map(e=>({id:e.id,author:{name:e.authorName,avatar:"/placeholder-avatar.jpg"},content:e.content,timestamp:new Date(e.timestamp).toLocaleString()})))}x.oR.success("Encouragement sent to ".concat(a,"! ??")),t&&a&&await g.$.encouragementReceived("You",a),w("")}catch(e){x.oR.error("Failed to send encouragement")}finally{k(!1)}}},C=j&&j.length>0?j:A;return b&&t?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(i.T,{placeholder:"Send an encouraging message to ".concat(a,"..."),value:N,onChange:e=>w(e.target.value),rows:3,className:"focus-ring resize-none"}),(0,s.jsxs)(n.$,{onClick:_,disabled:!N.trim()||y,className:"hover-lift w-full",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),y?"Sending...":"Send Encouragement"]})]}):(0,s.jsxs)(l.Zp,{className:"hover-lift",children:[(0,s.jsxs)(l.aR,{children:[(0,s.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5"}),t?"Send Encouragement":"Encouragement Messages",!t&&v>0&&(0,s.jsxs)(o.E,{variant:"default",className:"ml-auto",children:[(0,s.jsx)(u.A,{className:"h-3 w-3 mr-1"}),v," New"]})]}),(0,s.jsx)(l.BT,{children:t?"Send an encouraging message to ".concat(a):"View encouragement from your accountability partners"})]}),(0,s.jsx)(l.Wu,{className:"space-y-4",children:t?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(i.T,{placeholder:"Send an encouraging message to ".concat(a,"..."),value:N,onChange:e=>w(e.target.value),rows:3,className:"focus-ring resize-none ".concat(t?"w-full":"")})}),(0,s.jsx)(n.$,{onClick:_,disabled:!N.trim()||y,className:"hover-lift self-end",children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground text-center",children:["Your message will help motivate ",a," to keep going! ??"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(i.T,{placeholder:"Add a note about your progress, challenges, or wins...",value:N,onChange:e=>w(e.target.value),rows:3,className:"focus-ring resize-none"}),(0,s.jsxs)(n.$,{onClick:_,disabled:!N.trim()||y,className:"hover-lift",children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2"}),"Add Note"]})]}),(0,s.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:"Recent Messages"}),(0,s.jsxs)(o.E,{variant:"outline",className:"text-xs",children:[(0,s.jsx)(m.A,{className:"h-3 w-3 mr-1 text-red-500"}),"From Partners"]})]}),C.map(e=>(0,s.jsxs)("div",{className:"flex gap-3 p-3 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[(0,s.jsxs)(d.eu,{className:"h-8 w-8 flex-shrink-0",children:[(0,s.jsx)(d.BK,{src:e.author.avatar}),(0,s.jsx)(d.q5,{children:e.author.name.charAt(0)})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("p",{className:"text-sm font-medium",children:e.author.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:e.content}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:e.timestamp})]})]},e.id)),0===C.length&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3 opacity-50"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No encouragement messages yet"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Your accountability partners can send you motivational messages"})]})]})]})})]})}}},e=>{e.O(0,[297,5707,8760,1370,3224,6227,8720,7928,9620,9885,8441,1255,7358],()=>e(e.s=53424)),_N_E=e.O()}]);