(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4029],{2351:(e,a,r)=>{Promise.resolve().then(r.bind(r,54029))},10489:(e,a,r)=>{"use strict";r.d(a,{b:()=>o});var t=r(12115),s=r(97602),l=r(95155),i=t.forwardRef((e,a)=>(0,l.jsx)(s.sG.label,{...e,ref:a,onMouseDown:a=>{var r;a.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));i.displayName="Label";var o=i},35626:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(71847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},46046:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(71847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},54029:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>j});var t=r(95155),s=r(12115),l=r(97003),i=r(33789),o=r(90235),n=r(67001),d=r(83209),c=r(35626),u=r(95664),m=r(46046),p=r(33884),h=r(52619),f=r.n(h),x=r(20063),v=r(18720),g=r(19885),b=r(42855);function j(){let[e,a]=(0,s.useState)({first_name:"",last_name:"",username:"",email:"",phone_number:"",location:"",website:"",bio:"",profile_picture_url:""}),[r,h]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),y=(0,x.useRouter)();(0,s.useEffect)(()=>{_()},[]);let _=async()=>{try{let e=await b._.getSession();if(!e)return void y.push("/auth/login");let{data:r}=await b.N.from("profiles").select("*").eq("id",e.user.id).single();r&&a({first_name:r.first_name||"",last_name:r.last_name||"",username:r.username||"",email:r.email||"",phone_number:r.phone_number||"",location:r.location||"",website:r.website||"",bio:r.bio||"",profile_picture_url:r.profile_picture_url||""})}catch(e){console.error("Error loading profile:",e),v.oR.error("Failed to load profile")}},w=async r=>{var t;let s=null==(t=r.target.files)?void 0:t[0];if(s){if(s.size>5242880)return void v.oR.error("Image must be less than 5MB");if(!s.type.startsWith("image/"))return void v.oR.error("Please select an image file");N(!0);try{let r=await b._.getCurrentUser();if(!r)return void v.oR.error("Authentication error");let t=s.name.split(".").pop(),l="".concat(r.id,"/").concat(Date.now(),".").concat(t),{data:i,error:o}=await b.N.storage.from("profile-pictures").upload(l,s,{cacheControl:"3600",upsert:!0});if(o)throw o;let{data:{publicUrl:n}}=b.N.storage.from("profile-pictures").getPublicUrl(l);a({...e,profile_picture_url:n}),v.oR.success("Profile picture uploaded successfully!")}catch(e){console.error("Upload error:",e),v.oR.error("Failed to upload image. Please try again.")}finally{N(!1)}}},C=async a=>{a.preventDefault(),h(!0);try{let a=await b._.getCurrentUser();if(!a){v.oR.error("Please log in again"),y.push("/auth/login");return}let{error:r}=await b.N.from("profiles").update({first_name:e.first_name,last_name:e.last_name,username:e.username,phone_number:e.phone_number,location:e.location,website:e.website,bio:e.bio,profile_picture_url:e.profile_picture_url,updated_at:new Date().toISOString()}).eq("id",a.id);if(r)throw r;v.oR.success("Profile updated successfully!"),y.push("/profile")}catch(e){console.error("Error updating profile:",e),"23505"===e.code?v.oR.error("Username already exists. Please choose a different username."):v.oR.error("Failed to update profile")}finally{h(!1)}};return(0,t.jsx)(g.O,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Profile"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Update your personal information"})]}),(0,t.jsx)(f(),{href:"/profile",children:(0,t.jsxs)(l.$,{variant:"outline",children:[(0,t.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Back"]})})]}),(0,t.jsx)("form",{onSubmit:C,children:(0,t.jsxs)(d.Zp,{children:[(0,t.jsx)(d.aR,{children:(0,t.jsx)(d.ZB,{children:"Personal Information"})}),(0,t.jsxs)(d.Wu,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)(p.eu,{className:"h-24 w-24 border-4 border-primary/20",children:[(0,t.jsx)(p.BK,{src:e.profile_picture_url}),(0,t.jsx)(p.q5,{className:"text-xl bg-gradient-to-br from-primary to-primary/60 text-primary-foreground",children:e.first_name.charAt(0)||"U"})]}),(0,t.jsx)(l.$,{type:"button",size:"icon",variant:"outline",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full hover-lift shadow-lg",onClick:()=>{var e;return null==(e=document.getElementById("profile-picture-input"))?void 0:e.click()},disabled:j,children:j?(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,t.jsx)(u.A,{className:"h-4 w-4"})}),(0,t.jsx)("input",{id:"profile-picture-input",type:"file",accept:"image/*",className:"hidden",onChange:w})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Profile Picture"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Click the camera icon to change"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"firstName",children:"First Name"}),(0,t.jsx)(i.p,{id:"firstName",value:e.first_name,onChange:r=>a({...e,first_name:r.target.value}),placeholder:"John"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"lastName",children:"Last Name"}),(0,t.jsx)(i.p,{id:"lastName",value:e.last_name,onChange:r=>a({...e,last_name:r.target.value}),placeholder:"Doe"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"username",children:"Username"}),(0,t.jsx)(i.p,{id:"username",value:e.username,onChange:r=>a({...e,username:r.target.value}),placeholder:"johndoe"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"email",children:"Email"}),(0,t.jsx)(i.p,{id:"email",type:"email",value:e.email,onChange:r=>a({...e,email:r.target.value}),placeholder:"john@example.com"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"phone",children:"Phone"}),(0,t.jsx)(i.p,{id:"phone",value:e.phone_number,onChange:r=>a({...e,phone_number:r.target.value}),placeholder:"+1 (555) 123-4567"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"location",children:"Location"}),(0,t.jsx)(i.p,{id:"location",value:e.location,onChange:r=>a({...e,location:r.target.value}),placeholder:"San Francisco, CA"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"website",children:"Website"}),(0,t.jsx)(i.p,{id:"website",value:e.website,onChange:r=>a({...e,website:r.target.value}),placeholder:"johndoe.com"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(o.J,{htmlFor:"bio",children:"Bio"}),(0,t.jsx)(n.T,{id:"bio",value:e.bio,onChange:r=>a({...e,bio:r.target.value}),placeholder:"Tell us about yourself...",rows:3})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(l.$,{type:"submit",disabled:r,children:r?(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(m.A,{className:"h-4 w-4"}),"Save Changes"]})}),(0,t.jsx)(f(),{href:"/profile",children:(0,t.jsx)(l.$,{type:"button",variant:"outline",children:"Cancel"})})]})]})]})})]})})}},67001:(e,a,r)=>{"use strict";r.d(a,{T:()=>l});var t=r(95155);r(12115);var s=r(25016);function l(e){let{className:a,...r}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...r})}},83209:(e,a,r)=>{"use strict";r.d(a,{BT:()=>n,Wu:()=>d,ZB:()=>o,Zp:()=>l,aR:()=>i});var t=r(95155);r(12115);var s=r(25016);function l(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...r})}function i(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...r})}function o(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",a),...r})}function n(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",a),...r})}function d(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",a),...r})}},90235:(e,a,r)=>{"use strict";r.d(a,{J:()=>i});var t=r(95155);r(12115);var s=r(10489),l=r(25016);function i(e){let{className:a,...r}=e;return(0,t.jsx)(s.b,{"data-slot":"label",className:(0,l.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...r})}},95664:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(71847).A)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])}},e=>{e.O(0,[297,5707,8760,1370,3224,6227,8720,9885,8441,1255,7358],()=>e(e.s=2351)),_N_E=e.O()}]);