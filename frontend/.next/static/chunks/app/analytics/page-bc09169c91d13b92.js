(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1745],{8147:(e,t,s)=>{"use strict";s.d(t,{Or:()=>r,Zp:()=>n,rX:()=>l});var a=s(42855);async function r(e,t){try{var s;let r=t||(null==(s=await a._.getCurrentUser())?void 0:s.id);if(!r)return null;let{data:n,error:l}=await a.N.from("goal_streaks").select("*").eq("goal_id",e).eq("user_id",r).maybeSingle();if(l)throw l;return n}catch(e){return console.error("Error fetching streak:",e),null}}async function n(){try{let e=await a._.getCurrentUser();if(!e)return[];let{data:t,error:s}=await a.N.from("goal_streaks").select("\n        *,\n        goals:goal_id (\n          title,\n          goal_type,\n          category\n        )\n      ").eq("user_id",e.id).order("current_streak",{ascending:!1});if(s)throw s;return t||[]}catch(e){return console.error("Error fetching user streaks:",e),[]}}async function l(){try{let e=await a._.getCurrentUser();if(!e)return null;let{data:t,error:s}=await a.N.from("user_streak_stats").select("*").eq("user_id",e.id).maybeSingle();if(s)throw s;return t}catch(e){return console.error("Error fetching streak stats:",e),null}}},8198:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]])},25667:(e,t,s)=>{"use strict";s.d(t,{B8:()=>Z,UC:()=>B,bL:()=>M,l9:()=>R});var a=s(12115),r=s(92556),n=s(3468),l=s(72431),i=s(76842),c=s(97602),d=s(66218),o=s(23558),m=s(68946),x=s(95155),u="Tabs",[h,g]=(0,n.A)(u,[l.RG]),p=(0,l.RG)(),[f,j]=h(u),b=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,onValueChange:r,defaultValue:n,orientation:l="horizontal",dir:i,activationMode:h="automatic",...g}=e,p=(0,d.jH)(i),[j,b]=(0,o.i)({prop:a,onChange:r,defaultProp:null!=n?n:"",caller:u});return(0,x.jsx)(f,{scope:s,baseId:(0,m.B)(),value:j,onValueChange:b,orientation:l,dir:p,activationMode:h,children:(0,x.jsx)(c.sG.div,{dir:p,"data-orientation":l,...g,ref:t})})});b.displayName=u;var v="TabsList",y=a.forwardRef((e,t)=>{let{__scopeTabs:s,loop:a=!0,...r}=e,n=j(v,s),i=p(s);return(0,x.jsx)(l.bL,{asChild:!0,...i,orientation:n.orientation,dir:n.dir,loop:a,children:(0,x.jsx)(c.sG.div,{role:"tablist","aria-orientation":n.orientation,...r,ref:t})})});y.displayName=v;var N="TabsTrigger",w=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:a,disabled:n=!1,...i}=e,d=j(N,s),o=p(s),m=A(d.baseId,a),u=C(d.baseId,a),h=a===d.value;return(0,x.jsx)(l.q7,{asChild:!0,...o,focusable:!n,active:h,children:(0,x.jsx)(c.sG.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:m,...i,ref:t,onMouseDown:(0,r.mK)(e.onMouseDown,e=>{n||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(a)}),onKeyDown:(0,r.mK)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(a)}),onFocus:(0,r.mK)(e.onFocus,()=>{let e="manual"!==d.activationMode;h||n||!e||d.onValueChange(a)})})})});w.displayName=N;var k="TabsContent",_=a.forwardRef((e,t)=>{let{__scopeTabs:s,value:r,forceMount:n,children:l,...d}=e,o=j(k,s),m=A(o.baseId,r),u=C(o.baseId,r),h=r===o.value,g=a.useRef(h);return a.useEffect(()=>{let e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,x.jsx)(i.C,{present:n||h,children:s=>{let{present:a}=s;return(0,x.jsx)(c.sG.div,{"data-state":h?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":m,hidden:!a,id:u,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:g.current?"0s":void 0},children:a&&l})}})});function A(e,t){return"".concat(e,"-trigger-").concat(t)}function C(e,t){return"".concat(e,"-content-").concat(t)}_.displayName=k;var M=b,Z=y,R=w,B=_},32484:(e,t,s)=>{Promise.resolve().then(s.bind(s,45932))},45932:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>w});var a=s(95155),r=s(12115),n=s(83209),l=s(67812),i=s(55850),c=s(90923),d=s(80534),o=s(30814),m=s(71847);let x=(0,m.A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);var u=s(61362),h=s(8198);let g=(0,m.A)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var p=s(6613);let f=(0,m.A)("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),j=(0,m.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var b=s(1524),v=s(19885),y=s(42855),N=s(8147);function w(){let[e,t]=(0,r.useState)(!0),[s,m]=(0,r.useState)(null),[w,k]=(0,r.useState)("30d");(0,r.useEffect)(()=>{_()},[w]);let _=async()=>{try{t(!0);let e=await y._.getCurrentUser();if(!e)return;let{data:s}=await y.N.from("goals").select("*").eq("user_id",e.id);if(!s)return;let a=s.length,r=s.filter(e=>e.completed_at).length,n=s.filter(e=>!e.completed_at&&!e.is_suspended).length,l=a>0?Math.round(r/a*100):0,i=await (0,N.rX)();await (0,N.Zp)();let c=["Health & Fitness","Learning","Career","Personal"].map(e=>{let t=s.filter(t=>{let s=t.category||t.goal_type||"personal";return(({"health-fitness":"Health & Fitness",learning:"Learning",career:"Career",personal:"Personal"})[s]||s)===e}),a=t.filter(e=>e.completed_at).length,r=t.length,n=r>0?Math.round(a/r*100):0;return{category:e,completed:a,total:r,percentage:n,color:"Health & Fitness"===e?"bg-green-500":"Learning"===e?"bg-blue-500":"Career"===e?"bg-purple-500":"bg-orange-500"}}).filter(e=>e.total>0);m({totalGoals:a,completedGoals:r,activeGoals:n,completionRate:l,averageStreak:(null==i?void 0:i.personal_best_streak)||0,longestStreak:(null==i?void 0:i.personal_best_streak)||0,totalCompletions:(null==i?void 0:i.lifetime_completions)||0,categoryStats:c,monthlyStats:[{month:"Jan",completed:5,created:3,streak:12},{month:"Feb",completed:8,created:4,streak:15},{month:"Mar",completed:6,created:2,streak:18},{month:"Apr",completed:9,created:5,streak:22},{month:"May",completed:7,created:3,streak:25},{month:"Jun",completed:11,created:6,streak:28}],weeklyStats:[{day:"Mon",completions:3,goals:2},{day:"Tue",completions:5,goals:3},{day:"Wed",completions:4,goals:2},{day:"Thu",completions:6,goals:4},{day:"Fri",completions:2,goals:1},{day:"Sat",completions:8,goals:5},{day:"Sun",completions:7,goals:4}],streakDistribution:[{range:"0-5 days",count:2,percentage:20},{range:"6-15 days",count:4,percentage:40},{range:"16-30 days",count:3,percentage:30},{range:"30+ days",count:1,percentage:10}]})}catch(e){console.error("Error loading analytics:",e)}finally{t(!1)}};return e?(0,a.jsx)(v.O,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 text-primary animate-pulse mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Loading analytics..."})]})})}):s?(0,a.jsx)(v.O,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Track your progress and performance insights"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(c.tU,{value:w,onValueChange:e=>k(e),children:(0,a.jsxs)(c.j7,{children:[(0,a.jsx)(c.Xi,{value:"7d",children:"7D"}),(0,a.jsx)(c.Xi,{value:"30d",children:"30D"}),(0,a.jsx)(c.Xi,{value:"90d",children:"90D"}),(0,a.jsx)(c.Xi,{value:"1y",children:"1Y"})]})})})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Goals"}),(0,a.jsx)(o.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.totalGoals}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,a.jsx)(x,{className:"h-3 w-3 text-green-500 mr-1"}),"+12% from last month"]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Completion Rate"}),(0,a.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[s.completionRate,"%"]}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,a.jsx)(x,{className:"h-3 w-3 text-green-500 mr-1"}),"+5% from last month"]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Best Streak"}),(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.longestStreak}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,a.jsx)(g,{className:"h-3 w-3 text-gray-500 mr-1"}),"Personal record"]})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ZB,{className:"text-sm font-medium",children:"Total Completions"}),(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(n.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:s.totalCompletions}),(0,a.jsxs)("div",{className:"flex items-center text-xs text-muted-foreground",children:[(0,a.jsx)(x,{className:"h-3 w-3 text-green-500 mr-1"}),"+8% from last month"]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:"h-5 w-5"}),"Category Performance"]}),(0,a.jsx)(n.BT,{children:"Goal completion rates by category"})]}),(0,a.jsx)(n.Wu,{className:"space-y-4",children:s.categoryStats.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color)}),(0,a.jsx)("span",{className:"text-sm font-medium",children:e.category})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[e.completed,"/",e.total," (",e.percentage,"%)"]})]}),(0,a.jsx)(i.k,{value:e.percentage,className:"h-2"})]},e.category))})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),"Monthly Trends"]}),(0,a.jsx)(n.BT,{children:"Goal completion and creation patterns"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:s.monthlyStats.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:e.month}),(0,a.jsxs)("div",{className:"flex gap-4 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["âœ… ",e.completed]}),(0,a.jsxs)("span",{children:["\uD83C\uDFAF ",e.created]})]})]}),(0,a.jsxs)(l.E,{variant:"secondary",className:"bg-orange-100 text-orange-700",children:["\uD83D\uDD25 ",e.streak]})]},e.month))})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(j,{className:"h-5 w-5"}),"Weekly Activity"]}),(0,a.jsx)(n.BT,{children:"Daily completion patterns this week"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:s.weeklyStats.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium w-12",children:e.day}),(0,a.jsx)("div",{className:"flex-1 mx-4",children:(0,a.jsx)(i.k,{value:e.completions/Math.max(...s.weeklyStats.map(e=>e.completions))*100,className:"h-2"})}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground w-16 text-right",children:[e.completions," goals"]})]},e.day))})})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"h-5 w-5"}),"Streak Distribution"]}),(0,a.jsx)(n.BT,{children:"How your streaks are distributed"})]}),(0,a.jsx)(n.Wu,{className:"space-y-4",children:s.streakDistribution.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm",children:e.range}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-16 bg-muted rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"".concat(e.percentage,"%")}})}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground w-8",children:e.count})]})]},e.range))})]})]}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"h-5 w-5"}),"Insights & Recommendations"]}),(0,a.jsx)(n.BT,{children:"AI-powered insights to help you improve"})]}),(0,a.jsx)(n.Wu,{children:(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(u.A,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-green-800 dark:text-green-400",children:"Great Progress!"})]}),(0,a.jsx)("p",{className:"text-xs text-green-700 dark:text-green-300",children:"Your completion rate is above average. Keep up the excellent work!"})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(o.A,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-400",children:"Consistency Tip"})]}),(0,a.jsx)("p",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Try scheduling goals for the same time each day to build stronger habits."})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-orange-50 dark:bg-orange-950/20 border border-orange-200 dark:border-orange-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 text-orange-600"}),(0,a.jsx)("span",{className:"text-sm font-medium text-orange-800 dark:text-orange-400",children:"Streak Opportunity"})]}),(0,a.jsx)("p",{className:"text-xs text-orange-700 dark:text-orange-300",children:"You're close to your longest streak! One more day could set a new record."})]})]})})]})]})}):(0,a.jsx)(v.O,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(d.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"No analytics data available"})]})})})}},61362:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},80534:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(71847).A)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},83209:(e,t,s)=>{"use strict";s.d(t,{BT:()=>c,Wu:()=>d,ZB:()=>i,Zp:()=>n,aR:()=>l});var a=s(95155);s(12115);var r=s(25016);function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}},90923:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>c,av:()=>d,j7:()=>i,tU:()=>l});var a=s(95155);s(12115);var r=s(25667),n=s(25016);function l(e){let{className:t,...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function c(e){let{className:t,...s}=e;return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",t),...s})}}},e=>{e.O(0,[297,5707,8760,1370,3224,6227,9885,8441,1255,7358],()=>e(e.s=32484)),_N_E=e.O()}]);