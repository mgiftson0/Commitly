(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2303],{42855:(e,s,t)=>{"use strict";t.d(s,{N:()=>a,_:()=>n});let a=(0,t(78760).createClientComponentClient)(),n={signUp:async(e,s,t)=>{let{data:n,error:i}=await a.auth.signUp({email:e,password:s,options:{data:{full_name:t}}});if(i)throw i;return n},signIn:async(e,s)=>{let{data:t,error:n}=await a.auth.signInWithPassword({email:e,password:s});if(n)throw n;return t},signOut:async()=>{await a.auth.signOut()},signInWithGoogle:async()=>{let{data:e,error:s}=await a.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(s)throw s;return e},getCurrentUser:async()=>{let{data:{user:e}}=await a.auth.getUser();return e},getSession:async()=>{let{data:{session:e}}=await a.auth.getSession();return e},hasCompletedKyc:async()=>{let e=await n.getCurrentUser();if(!e)return!1;let{data:s}=await a.from("profiles").select("has_completed_kyc").eq("id",e.id).maybeSingle();return(null==s?void 0:s.has_completed_kyc)===!0},clearSession:async()=>{await a.auth.signOut()},resetPassword:async e=>{let{error:s}=await a.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/auth/reset-password/confirm")});if(s)throw s}}},46535:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});var a=t(95155),n=t(12115),i=t(42855);function r(){let[e,s]=(0,n.useState)(null),[t,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{var e,t,a;let n=await i._.getSession();if(s({hasSession:!!n,userId:null==n||null==(e=n.user)?void 0:e.id,email:null==n||null==(t=n.user)?void 0:t.email,emailConfirmed:null==n||null==(a=n.user)?void 0:a.email_confirmed_at}),n){let{data:e,error:s}=await i.N.from("profiles").select("*").eq("id",n.user.id).maybeSingle();r({hasProfile:!!e,hasCompletedKyc:null==e?void 0:e.has_completed_kyc,username:null==e?void 0:e.username,error:null==s?void 0:s.message})}}catch(e){s({error:e.message})}})()},[]),(0,a.jsxs)("div",{className:"min-h-screen p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Session Debug"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"p-4 border rounded",children:[(0,a.jsx)("h2",{className:"font-bold",children:"Session Info:"}),(0,a.jsx)("pre",{className:"text-sm",children:JSON.stringify(e,null,2)})]}),(0,a.jsxs)("div",{className:"p-4 border rounded",children:[(0,a.jsx)("h2",{className:"font-bold",children:"Profile Info:"}),(0,a.jsx)("pre",{className:"text-sm",children:JSON.stringify(t,null,2)})]})]})]})}},85746:(e,s,t)=>{Promise.resolve().then(t.bind(t,46535))}},e=>{e.O(0,[8760,8441,1255,7358],()=>e(e.s=85746)),_N_E=e.O()}]);