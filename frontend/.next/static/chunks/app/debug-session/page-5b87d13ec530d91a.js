(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2303],{42855:(e,s,a)=>{"use strict";a.d(s,{N:()=>t,_:()=>i});let t=(0,a(78760).createClientComponentClient)(),i={signUp:async(e,s,a)=>{let{data:i,error:n}=await t.auth.signUp({email:e,password:s,options:{data:{full_name:a}}});if(n)throw n;return i},signIn:async(e,s)=>{let{data:a,error:i}=await t.auth.signInWithPassword({email:e,password:s});if(i)throw i;return a},signOut:async()=>{await t.auth.signOut()},signInWithGoogle:async()=>{let{data:e,error:s}=await t.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(s)throw s;return e},getCurrentUser:async()=>{let{data:{user:e}}=await t.auth.getUser();return e},getSession:async()=>{let{data:{session:e}}=await t.auth.getSession();return e},hasCompletedKyc:async()=>{let e=await i.getCurrentUser();if(!e)return!1;let{data:s}=await t.from("profiles").select("has_completed_kyc").eq("id",e.id).maybeSingle();return(null==s?void 0:s.has_completed_kyc)===!0},clearSession:async()=>{await t.auth.signOut()},resetPassword:async e=>{let{error:s}=await t.auth.resetPasswordForEmail(e,{redirectTo:"".concat(window.location.origin,"/auth/reset-password/confirm")});if(s)throw s},updatePassword:async e=>{let{error:s}=await t.auth.updateUser({password:e});if(s)throw s}}},46535:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(95155),i=a(12115),n=a(42855);function r(){let[e,s]=(0,i.useState)(null),[a,r]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{try{var e,a,t;let i=await n._.getSession();if(s({hasSession:!!i,userId:null==i||null==(e=i.user)?void 0:e.id,email:null==i||null==(a=i.user)?void 0:a.email,emailConfirmed:null==i||null==(t=i.user)?void 0:t.email_confirmed_at}),i){let{data:e,error:s}=await n.N.from("profiles").select("*").eq("id",i.user.id).maybeSingle();r({hasProfile:!!e,hasCompletedKyc:null==e?void 0:e.has_completed_kyc,username:null==e?void 0:e.username,error:null==s?void 0:s.message})}}catch(e){s({error:e.message})}})()},[]),(0,t.jsxs)("div",{className:"min-h-screen p-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Session Debug"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-4 border rounded",children:[(0,t.jsx)("h2",{className:"font-bold",children:"Session Info:"}),(0,t.jsx)("pre",{className:"text-sm",children:JSON.stringify(e,null,2)})]}),(0,t.jsxs)("div",{className:"p-4 border rounded",children:[(0,t.jsx)("h2",{className:"font-bold",children:"Profile Info:"}),(0,t.jsx)("pre",{className:"text-sm",children:JSON.stringify(a,null,2)})]})]})]})}},85746:(e,s,a)=>{Promise.resolve().then(a.bind(a,46535))}},e=>{e.O(0,[8760,8441,1255,7358],()=>e(e.s=85746)),_N_E=e.O()}]);