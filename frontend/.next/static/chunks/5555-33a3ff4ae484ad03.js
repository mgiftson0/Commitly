"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5555],{5373:(e,a,t)=>{t.d(a,{p:()=>p});var s=t(95155),l=t(12115),r=t(15239),n=t(97003),o=t(54679),i=t(33789),c=t(17181),d=t(5917),m=t(75426),u=t(97378),x=t(73155),f=t(5937),h=t(18720);function p(e){let{username:a,displayName:t,profilePicture:p}=e,[g,j]=(0,l.useState)(!1),v="".concat(window.location.origin,"/profile/").concat(a),b=async()=>{try{await navigator.clipboard.writeText(v),j(!0),h.oR.success("Profile link copied!"),setTimeout(()=>j(!1),2e3)}catch(e){h.oR.error("Failed to copy link")}};return(0,s.jsxs)(o.lG,{children:[(0,s.jsx)(o.zM,{asChild:!0,children:(0,s.jsxs)(n.$,{variant:"outline",size:"sm",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Share Profile"]})}),(0,s.jsxs)(o.Cf,{className:"sm:max-w-md",children:[(0,s.jsx)(o.c7,{children:(0,s.jsxs)(o.L3,{className:"flex items-center gap-3",children:[p&&(0,s.jsx)(r.default,{src:p,alt:t,width:32,height:32,className:"w-8 h-8 rounded-full"}),"Share ",t,"'s Profile"]})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.p,{value:v,readOnly:!0}),(0,s.jsx)(n.$,{size:"sm",onClick:b,children:g?(0,s.jsx)(d.A,{className:"h-4 w-4"}):(0,s.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,s.jsxs)(n.$,{variant:"outline",onClick:()=>{let e="Check out ".concat(t,"'s goals on Commitly!"),a="https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(e),"&url=").concat(encodeURIComponent(v));window.open(a,"_blank")},className:"flex flex-col gap-1 h-auto py-3",children:[(0,s.jsx)(u.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"text-xs",children:"Twitter"})]}),(0,s.jsxs)(n.$,{variant:"outline",onClick:()=>{let e="https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(v));window.open(e,"_blank")},className:"flex flex-col gap-1 h-auto py-3",children:[(0,s.jsx)(x.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"text-xs",children:"Facebook"})]}),(0,s.jsxs)(n.$,{variant:"outline",onClick:()=>{let e="Check out ".concat(t,"'s goals on Commitly! ").concat(v),a="https://wa.me/?text=".concat(encodeURIComponent(e));window.open(a,"_blank")},className:"flex flex-col gap-1 h-auto py-3",children:[(0,s.jsx)(f.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"text-xs",children:"WhatsApp"})]})]})]})]})]})}},8147:(e,a,t)=>{t.d(a,{Or:()=>l,Zp:()=>r,rX:()=>n});var s=t(42855);async function l(e,a){try{var t;let l=a||(null==(t=await s._.getCurrentUser())?void 0:t.id);if(!l)return null;let{data:r,error:n}=await s.N.from("goal_streaks").select("*").eq("goal_id",e).eq("user_id",l).maybeSingle();if(n)throw n;return r}catch(e){return console.error("Error fetching streak:",e),null}}async function r(){try{let e=await s._.getCurrentUser();if(!e)return[];let{data:a,error:t}=await s.N.from("goal_streaks").select("\n        *,\n        goals:goal_id (\n          title,\n          goal_type,\n          category\n        )\n      ").eq("user_id",e.id).order("current_streak",{ascending:!1});if(t)throw t;return a||[]}catch(e){return console.error("Error fetching user streaks:",e),[]}}async function n(){try{let e=await s._.getCurrentUser();if(!e)return null;let{data:a,error:t}=await s.N.from("user_streak_stats").select("*").eq("user_id",e.id).maybeSingle();if(t)throw t;return a}catch(e){return console.error("Error fetching streak stats:",e),null}}},23733:(e,a,t)=>{t.d(a,{d:()=>j});var s=t(95155),l=t(12115),r=t(54679),n=t(90923),o=t(33884),i=t(97003),c=t(67812),d=t(91169),m=t(12181),u=t(5937),x=t(96583),f=t(52619),h=t.n(f),p=t(42855),g=t(18720);function j(e){let{open:a,onOpenChange:t,userId:f,initialTab:j="followers"}=e,[v,b]=(0,l.useState)([]),[N,w]=(0,l.useState)([]),[y,k]=(0,l.useState)(!1),[_,C]=(0,l.useState)(null);(0,l.useEffect)(()=>{a&&A()},[a,A]);let A=(0,l.useCallback)(async()=>{k(!0);try{let{data:{user:e}}=await p.N.auth.getUser();C(e);let{data:a}=await p.N.from("follows").select("\n          follower_id,\n          profiles!follows_follower_id_fkey(*)\n        ").eq("following_id",f).eq("status","accepted");a&&b(a.map(e=>e.profiles).filter(Boolean));let{data:t}=await p.N.from("follows").select("\n          following_id,\n          profiles!follows_following_id_fkey(*)\n        ").eq("follower_id",f).eq("status","accepted");t&&w(t.map(e=>e.profiles).filter(Boolean))}catch(e){console.error("Error loading follow data:",e),g.oR.error("Failed to load data")}finally{k(!1)}},[f]),z=e=>{var a,t;let{user:l}=e,r=_&&_.id===l.id;return(0,s.jsx)("div",{className:"group hover-lift",children:(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 hover:bg-accent/30 rounded-xl transition-all duration-200 border border-transparent hover:border-border/50",children:[(0,s.jsxs)(h(),{href:"/profile/".concat(l.username),className:"flex items-center gap-4 flex-1",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)(o.eu,{className:"h-12 w-12 ring-2 ring-background shadow-sm",children:[(0,s.jsx)(o.BK,{src:l.profile_picture_url}),(0,s.jsxs)(o.q5,{className:"bg-gradient-to-br from-primary/20 to-primary/10 text-primary font-semibold",children:[null==(a=l.first_name)?void 0:a.charAt(0),null==(t=l.last_name)?void 0:t.charAt(0)]})]}),r&&(0,s.jsx)("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-primary rounded-full border-2 border-background flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-white rounded-full"})})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("p",{className:"font-semibold truncate text-foreground",children:[l.first_name," ",l.last_name]}),r&&(0,s.jsx)(c.E,{variant:"secondary",className:"text-xs px-2 py-0.5",children:"You"})]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground truncate",children:["@",l.username]}),l.bio&&(0,s.jsx)("p",{className:"text-xs text-muted-foreground line-clamp-1 mt-1 max-w-xs",children:l.bio}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(d.A,{className:"h-3 w-3"}),l.followers_count||0," followers"]}),(0,s.jsxs)("span",{className:"flex items-center gap-1",children:[(0,s.jsx)(m.A,{className:"h-3 w-3"}),l.following_count||0," following"]})]})]})]}),_&&!r&&(0,s.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)(i.$,{variant:"outline",size:"sm",className:"hover-lift",children:(0,s.jsx)(u.A,{className:"h-3 w-3"})}),(0,s.jsx)(i.$,{size:"sm",className:"hover-lift",children:(0,s.jsx)(x.A,{className:"h-3 w-3"})})]})]})})};return(0,s.jsx)(r.lG,{open:a,onOpenChange:t,children:(0,s.jsxs)(r.Cf,{className:"sm:max-w-lg max-h-[85vh] p-0 bg-background/95 backdrop-blur-xl border-border/50 shadow-2xl",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 via-transparent to-primary/10 rounded-t-lg"}),(0,s.jsx)(r.c7,{className:"px-6 py-4 relative",children:(0,s.jsxs)(r.L3,{className:"flex items-center gap-3 text-lg",children:[(0,s.jsx)("div",{className:"p-2 rounded-xl bg-primary/10",children:(0,s.jsx)(d.A,{className:"h-5 w-5 text-primary"})}),(0,s.jsx)("span",{className:"font-semibold",children:"Connections"})]})})]}),(0,s.jsxs)(n.tU,{defaultValue:j,className:"flex-1 flex flex-col",children:[(0,s.jsxs)(n.j7,{className:"grid w-full grid-cols-2 mx-6 mb-2 bg-muted/50",children:[(0,s.jsxs)(n.Xi,{value:"followers",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm transition-all",children:["Followers",(0,s.jsx)(c.E,{variant:"secondary",className:"ml-2 text-xs",children:v.length})]}),(0,s.jsxs)(n.Xi,{value:"following",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm transition-all",children:["Following",(0,s.jsx)(c.E,{variant:"secondary",className:"ml-2 text-xs",children:N.length})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,s.jsx)(n.av,{value:"followers",className:"h-full mt-0",children:(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto px-6 pb-6 scrollbar-thin",children:y?(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):0===v.length?(0,s.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,s.jsx)("div",{className:"p-4 rounded-2xl bg-muted/30 inline-block",children:(0,s.jsx)(d.A,{className:"h-12 w-12 text-muted-foreground/50"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-muted-foreground",children:"No followers yet"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Be the first to inspire someone!"})]})]}):(0,s.jsx)("div",{className:"space-y-3",children:v.map(e=>(0,s.jsx)(z,{user:e},e.id))})})}),(0,s.jsx)(n.av,{value:"following",className:"h-full mt-0",children:(0,s.jsx)("div",{className:"max-h-96 overflow-y-auto px-6 pb-6 scrollbar-thin",children:y?(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin"})}):0===N.length?(0,s.jsxs)("div",{className:"text-center py-12 space-y-4",children:[(0,s.jsx)("div",{className:"p-4 rounded-2xl bg-muted/30 inline-block",children:(0,s.jsx)(m.A,{className:"h-12 w-12 text-muted-foreground/50"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-muted-foreground",children:"Not following anyone yet"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Discover amazing goal-setters!"})]})]}):(0,s.jsx)("div",{className:"space-y-3",children:N.map(e=>(0,s.jsx)(z,{user:e},e.id))})})})]})]})]})})}},54679:(e,a,t)=>{t.d(a,{Cf:()=>m,L3:()=>x,c7:()=>u,lG:()=>o,rr:()=>f,zM:()=>i});var s=t(95155);t(12115);var l=t(89511),r=t(65229),n=t(25016);function o(e){let{...a}=e;return(0,s.jsx)(l.bL,{"data-slot":"dialog",...a})}function i(e){let{...a}=e;return(0,s.jsx)(l.l9,{"data-slot":"dialog-trigger",...a})}function c(e){let{...a}=e;return(0,s.jsx)(l.ZL,{"data-slot":"dialog-portal",...a})}function d(e){let{className:a,...t}=e;return(0,s.jsx)(l.hJ,{"data-slot":"dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...t})}function m(e){let{className:a,children:t,showCloseButton:o=!0,...i}=e;return(0,s.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,s.jsx)(d,{}),(0,s.jsxs)(l.UC,{"data-slot":"dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...i,children:[t,o&&(0,s.jsxs)(l.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(r.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",a),...t})}function x(e){let{className:a,...t}=e;return(0,s.jsx)(l.hE,{"data-slot":"dialog-title",className:(0,n.cn)("text-lg leading-none font-semibold",a),...t})}function f(e){let{className:a,...t}=e;return(0,s.jsx)(l.VY,{"data-slot":"dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",a),...t})}},61305:(e,a,t)=>{t.d(a,{R:()=>m});var s=t(95155),l=t(97003),r=t(33789),n=t(90235),o=t(67161),i=t(97378),c=t(5937),d=t(23664);function m(e){let{profile:a,isEditing:t=!1,onChange:m}=e,u=[{key:"instagram",label:"Instagram",icon:o.A,placeholder:"@username",value:a.instagram||""},{key:"twitter",label:"Twitter/X",icon:i.A,placeholder:"@username",value:a.twitter||""},{key:"snapchat",label:"Snapchat",icon:c.A,placeholder:"@username",value:a.snapchat||""},{key:"email",label:"Email",icon:d.A,placeholder:"email@example.com",value:a.email||""}];if(t)return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Social Links"}),(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:u.map(e=>{let a=e.icon;return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(n.J,{htmlFor:e.key,className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(a,{className:"h-4 w-4"}),e.label]}),(0,s.jsx)(r.p,{id:e.key,placeholder:e.placeholder,value:e.value,onChange:a=>null==m?void 0:m(e.key,a.target.value)})]},e.key)})})]});let x=u.filter(e=>e.value&&"email"!==e.key);return 0===x.length?null:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:x.map(e=>{let a=e.icon;return(0,s.jsx)(l.$,{variant:"outline",size:"icon",asChild:!0,className:"h-9 w-9",title:e.label,children:(0,s.jsx)("a",{href:(()=>{switch(e.key){case"instagram":return"https://instagram.com/".concat(e.value.replace("@",""));case"twitter":return"https://twitter.com/".concat(e.value.replace("@",""));case"snapchat":return"https://snapchat.com/add/".concat(e.value.replace("@",""));default:return"#"}})(),target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(a,{className:"h-4 w-4"})})},e.key)})})}},83209:(e,a,t)=>{t.d(a,{BT:()=>i,Wu:()=>c,ZB:()=>o,Zp:()=>r,aR:()=>n});var s=t(95155);t(12115);var l=t(25016);function r(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,l.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...t})}function n(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,l.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...t})}function o(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,l.cn)("leading-none font-semibold",a),...t})}function i(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,l.cn)("text-muted-foreground text-sm",a),...t})}function c(e){let{className:a,...t}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,l.cn)("px-6",a),...t})}},90235:(e,a,t)=>{t.d(a,{J:()=>n});var s=t(95155);t(12115);var l=t(10489),r=t(25016);function n(e){let{className:a,...t}=e;return(0,s.jsx)(l.b,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...t})}},90923:(e,a,t)=>{t.d(a,{Xi:()=>i,av:()=>c,j7:()=>o,tU:()=>n});var s=t(95155);t(12115);var l=t(25667),r=t(25016);function n(e){let{className:a,...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"tabs",className:(0,r.cn)("flex flex-col gap-2",a),...t})}function o(e){let{className:a,...t}=e;return(0,s.jsx)(l.B8,{"data-slot":"tabs-list",className:(0,r.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...t})}function i(e){let{className:a,...t}=e;return(0,s.jsx)(l.l9,{"data-slot":"tabs-trigger",className:(0,r.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...t})}function c(e){let{className:a,...t}=e;return(0,s.jsx)(l.UC,{"data-slot":"tabs-content",className:(0,r.cn)("flex-1 outline-none",a),...t})}}}]);